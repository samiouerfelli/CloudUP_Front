{"ast":null,"code":"import { map } from 'rxjs/operators';\nimport { BaseService } from '../base-service';\nimport { authenticate } from '../fn/authentification/authenticate';\nimport { confirm } from '../fn/authentification/confirm';\nimport { register } from '../fn/authentification/register';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api-configuration\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@auth0/angular-jwt\";\nexport class AuthentificationService extends BaseService {\n  constructor(config, http, jwtHelper) {\n    super(config, http);\n    this.jwtHelper = jwtHelper;\n    this.isLoggedInStatus = false;\n  }\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `authenticate()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\n  authenticate$Response(params, context) {\n    return authenticate(this.http, this.rootUrl, params, context);\n  }\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `authenticate$Response()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\n  authenticate(params, context) {\n    return this.authenticate$Response(params, context).pipe(map(r => r.body));\n  }\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `register()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\n  register$Response(params, context) {\n    return register(this.http, this.rootUrl, params, context);\n  }\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `register$Response()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\n  register(params, context) {\n    return this.register$Response(params, context).pipe(map(r => r.body));\n  }\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `confirm()` instead.\r\n   *\r\n   * This method doesn't expect any request body.\r\n   */\n  confirm$Response(params, context) {\n    return confirm(this.http, this.rootUrl, params, context);\n  }\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `confirm$Response()` instead.\r\n   *\r\n   * This method doesn't expect any request body.\r\n   */\n  confirm(params, context) {\n    return this.confirm$Response(params, context).pipe(map(r => r.body));\n  }\n  getToken() {\n    return localStorage.getItem('token');\n  }\n  isTokenExpired() {\n    const token = this.getToken();\n    if (!token) {\n      return true;\n    }\n    return this.jwtHelper.isTokenExpired(token);\n  }\n  checkTokenOnLoad() {\n    const token = this.getToken();\n    this.isLoggedInStatus = token ? !this.jwtHelper.isTokenExpired(token) : false;\n  }\n  // Fonction pour récupérer l'état de connexion\n  get isLoggedIn() {\n    return this.isLoggedInStatus;\n  }\n  // Fonction pour définir l'état de connexion après une authentification réussie\n  setLoggedIn(value, token) {\n    this.isLoggedInStatus = value;\n    if (value && token) {\n      localStorage.setItem('token', token);\n    } else {\n      localStorage.removeItem('token');\n    }\n  }\n}\n/** Path part for operation `authenticate()` */\nAuthentificationService.AuthenticatePath = '/auth/authenticate';\n/** Path part for operation `register()` */\nAuthentificationService.RegisterPath = '/auth/Register';\n/** Path part for operation `confirm()` */\nAuthentificationService.ConfirmPath = '/auth/activate-account';\nAuthentificationService.ɵfac = function AuthentificationService_Factory(t) {\n  return new (t || AuthentificationService)(i0.ɵɵinject(i1.ApiConfiguration), i0.ɵɵinject(i2.HttpClient), i0.ɵɵinject(i3.JwtHelperService));\n};\nAuthentificationService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthentificationService,\n  factory: AuthentificationService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["map","BaseService","authenticate","confirm","register","AuthentificationService","constructor","config","http","jwtHelper","authenticate$Response","params","context","rootUrl","pipe","r","body","register$Response","confirm$Response","getToken","localStorage","getItem","isTokenExpired","token","checkTokenOnLoad","isLoggedInStatus","isLoggedIn","setLoggedIn","value","setItem","removeItem","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\yaasm\\IdeaProjects\\CloudUP_FrontTestYassmine\\src\\app\\services\\services\\authentification.service.ts"],"sourcesContent":["/* tslint:disable */\r\n/* eslint-disable */\r\nimport { HttpClient, HttpContext } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { BaseService } from '../base-service';\r\nimport { ApiConfiguration } from '../api-configuration';\r\nimport { StrictHttpResponse } from '../strict-http-response';\r\n\r\nimport { authenticate } from '../fn/authentification/authenticate';\r\nimport { Authenticate$Params } from '../fn/authentification/authenticate';\r\nimport { AuthentificationResponse } from '../models/authentification-response';\r\nimport { confirm } from '../fn/authentification/confirm';\r\nimport { Confirm$Params } from '../fn/authentification/confirm';\r\nimport { register } from '../fn/authentification/register';\r\nimport { Register$Params } from '../fn/authentification/register';\r\nimport {JwtHelperService} from \"@auth0/angular-jwt\";\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthentificationService extends BaseService {\r\n  constructor(config: ApiConfiguration, http: HttpClient,public jwtHelper: JwtHelperService) {\r\n    super(config, http);\r\n  }\r\n\r\n  /** Path part for operation `authenticate()` */\r\n  static readonly AuthenticatePath = '/auth/authenticate';\r\n\r\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `authenticate()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\r\n  authenticate$Response(params: Authenticate$Params, context?: HttpContext): Observable<StrictHttpResponse<AuthentificationResponse>> {\r\n    return authenticate(this.http, this.rootUrl, params, context);\r\n  }\r\n\r\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `authenticate$Response()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\r\n  authenticate(params: Authenticate$Params, context?: HttpContext): Observable<AuthentificationResponse> {\r\n    return this.authenticate$Response(params, context).pipe(\r\n      map((r: StrictHttpResponse<AuthentificationResponse>): AuthentificationResponse => r.body)\r\n    );\r\n  }\r\n\r\n  /** Path part for operation `register()` */\r\n  static readonly RegisterPath = '/auth/Register';\r\n\r\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `register()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\r\n  register$Response(params: Register$Params, context?: HttpContext): Observable<StrictHttpResponse<{\r\n}>> {\r\n    return register(this.http, this.rootUrl, params, context);\r\n  }\r\n\r\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `register$Response()` instead.\r\n   *\r\n   * This method sends `application/json` and handles request body of type `application/json`.\r\n   */\r\n  register(params: Register$Params, context?: HttpContext): Observable<{\r\n}> {\r\n    return this.register$Response(params, context).pipe(\r\n      map((r: StrictHttpResponse<{\r\n}>): {\r\n} => r.body)\r\n    );\r\n  }\r\n\r\n  /** Path part for operation `confirm()` */\r\n  static readonly ConfirmPath = '/auth/activate-account';\r\n\r\n  /**\r\n   * This method provides access to the full `HttpResponse`, allowing access to response headers.\r\n   * To access only the response body, use `confirm()` instead.\r\n   *\r\n   * This method doesn't expect any request body.\r\n   */\r\n  confirm$Response(params: Confirm$Params, context?: HttpContext): Observable<StrictHttpResponse<void>> {\r\n    return confirm(this.http, this.rootUrl, params, context);\r\n  }\r\n\r\n  /**\r\n   * This method provides access only to the response body.\r\n   * To access the full response (for headers, for example), `confirm$Response()` instead.\r\n   *\r\n   * This method doesn't expect any request body.\r\n   */\r\n  confirm(params: Confirm$Params, context?: HttpContext): Observable<void> {\r\n    return this.confirm$Response(params, context).pipe(\r\n      map((r: StrictHttpResponse<void>): void => r.body)\r\n    );\r\n  }\r\n\r\n\r\n\r\n  private isLoggedInStatus: boolean = false;\r\n\r\n  getToken(): string | null {\r\n    return localStorage.getItem('token');\r\n  }\r\n  isTokenExpired(): boolean {\r\n    const token = this.getToken();\r\n    if (!token) {\r\n      return true;\r\n    }\r\n    return this.jwtHelper.isTokenExpired(token);\r\n  }\r\n\r\n  private checkTokenOnLoad() {\r\n    const token = this.getToken();\r\n    this.isLoggedInStatus = token ? !this.jwtHelper.isTokenExpired(token) : false;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  // Fonction pour récupérer l'état de connexion\r\n  get isLoggedIn(): boolean {\r\n    return this.isLoggedInStatus;\r\n  }\r\n\r\n  // Fonction pour définir l'état de connexion après une authentification réussie\r\n  setLoggedIn(value: boolean, token?: string) {\r\n    this.isLoggedInStatus = value;\r\n    if (value && token) {\r\n      localStorage.setItem('token', token);\r\n    } else {\r\n      localStorage.removeItem('token');\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}