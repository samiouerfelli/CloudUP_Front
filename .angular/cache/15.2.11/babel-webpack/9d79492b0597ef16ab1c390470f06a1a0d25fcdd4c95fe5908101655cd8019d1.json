{"ast":null,"code":"import { __decorate } from 'tslib';\nimport { Injectable, Input, HostBinding, ViewChild, Component, EventEmitter, ElementRef, ChangeDetectorRef, HostListener, ComponentFactoryResolver, ApplicationRef, Injector, Output, Directive, ContentChildren, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReplaySubject } from 'rxjs';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nconst _c0 = [\"imageFirst\"];\nconst _c1 = [\"imageSecond\"];\nconst _c2 = [\"imageLast\"];\nconst _c3 = [\"lightboxImage\"];\nconst _c4 = [\"prevImageElem\"];\nconst _c5 = [\"lightboxContainer\"];\nfunction LightboxComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.counter);\n  }\n}\nfunction LightboxComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_div_1_Template_div_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ɵngcc0.ɵɵresetView(ctx_r7.closeLightbox());\n    });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.closeButtonText);\n  }\n}\nfunction LightboxComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 13);\n  }\n}\nfunction LightboxComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelement(1, \"div\", 13);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\nfunction LightboxComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵtext(1, \"Failed to load image\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\nlet EventService = class EventService {\n  constructor() {\n    this.emitter = new ReplaySubject(1);\n  }\n  emitChangeEvent(data) {\n    this.emitter.next(data);\n  }\n};\nEventService.ɵfac = function EventService_Factory(t) {\n  return new (t || EventService)();\n};\nEventService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: EventService,\n  factory: function (t) {\n    return EventService.ɵfac(t);\n  }\n});\nclass Utils {\n  static mobileCheck() {\n    var check = false;\n    (function (a) {\n      if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n    })(navigator.userAgent || navigator.vendor);\n    return check;\n  }\n}\nlet LightboxCommonComponent = class LightboxCommonComponent {\n  constructor(eventService) {\n    this.eventService = eventService;\n    this.currentImageIndex = 0;\n    this.indexCurrentSlide = 1;\n    this.containerStyles = {\n      transition: '',\n      transform: '',\n      width: '',\n      height: '',\n      opacity: ''\n    };\n    this.currImageLoadingState = 'not-loaded';\n    this.isMobile = Utils.mobileCheck();\n  }\n  get lightboxImage() {\n    return this._lightboxImage;\n  }\n  get lightboxImageElement() {\n    if (this.lightboxImage) {\n      return this.lightboxImage.nativeElement;\n    }\n  }\n  get lightboxImageNaturalHeight() {\n    if (this.lightboxImageElement) {\n      return this.lightboxImageElement.naturalHeight;\n    }\n  }\n  get lightboxImageNaturalWidth() {\n    if (this.lightboxImageElement) {\n      return this.lightboxImageElement.naturalWidth;\n    }\n  }\n  get index() {\n    return this.currentImageIndex;\n  }\n  get properties() {\n    return this.lightboxData.properties;\n  }\n  get images() {\n    return this.lightboxData.images || [this.lightboxData.image];\n  }\n  get thumbnailImage() {\n    return this.images[this.currentImageIndex].nativeElement;\n  }\n  get thumbnailImagePosition() {\n    return this.thumbnailImage.getBoundingClientRect();\n  }\n  // Image size if it is larger than the window size\n  get virtualImageDimension() {\n    let height = this.lightboxImageNaturalHeight;\n    let width = height * this.imageAspectRatio;\n    const windowWidth = document.body.clientWidth;\n    const windowHeight = window.innerHeight;\n    if (this.isImageLargerWindow) {\n      if (height > windowHeight) {\n        height = windowHeight;\n        width = height * this.imageAspectRatio;\n      }\n      if (width > windowWidth) {\n        width = windowWidth;\n        height = width / this.imageAspectRatio;\n      }\n    } else {\n      width = this.lightboxImageNaturalWidth;\n      height = this.lightboxImageNaturalHeight;\n    }\n    if (width === 0 || Number.parseInt(height) === 0) {\n      return {\n        width: 200,\n        height: 200\n      };\n    }\n    return {\n      width,\n      height\n    };\n  }\n  get containerInitialPosition() {\n    const scale = this.showState === 'initial-thumbnail-image' ? 1 : this.containerScale;\n    const top = this.thumbnailImagePosition.top;\n    const left = this.thumbnailImagePosition.left;\n    return 'matrix(' + scale + ', 0, 0, ' + scale + ',' + left + ',' + top + ')';\n  }\n  get containerFullscreenPosition() {\n    const left = (document.body.clientWidth - this.virtualImageDimension.width) / 2;\n    const top = (window.innerHeight - this.virtualImageDimension.height) / 2;\n    return 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n  }\n  get containerScale() {\n    return this.thumbnailImagePosition.width / this.virtualImageDimension.width;\n  }\n  get imageAspectRatio() {\n    return this.thumbnailImage.naturalWidth / this.thumbnailImage.naturalHeight;\n  }\n  get isImageLargerWindow() {\n    const imageNaturalWidth = this.lightboxImageNaturalWidth;\n    const imageNaturalHeight = this.lightboxImageNaturalHeight;\n    const windowWidth = document.body.clientWidth;\n    const windowHeight = window.innerHeight;\n    return imageNaturalWidth > windowWidth || imageNaturalHeight > windowHeight;\n  }\n  get isFirstImage() {\n    if (this.properties.loop) {\n      return false;\n    } else {\n      return this.index === 0;\n    }\n  }\n  get isLastImage() {\n    if (this.properties.loop) {\n      return false;\n    } else {\n      return this.index === this.latestImageIndex;\n    }\n  }\n  get latestImageIndex() {\n    return this.images.length - 1;\n  }\n  get backgroundColor() {\n    const opacity = this.properties.backgroundOpacity;\n    const color = this.properties.backgroundColor;\n    if (color === 'black') {\n      return 'rgba(0, 0, 0, ' + opacity + ')';\n    } else {\n      return 'rgba(255, 255, 255, ' + opacity + ')';\n    }\n  }\n  get animationDuration() {\n    const animationDuration = this.properties.animationDuration;\n    if (typeof animationDuration === \"string\") {\n      return Number.parseInt(animationDuration);\n    } else {\n      return animationDuration;\n    }\n  }\n  get animationMode() {\n    if (this.currImageLoadingState === 'error') {\n      return 'default';\n    }\n    return this.properties.animationMode;\n  }\n  get animationTimingFunction() {\n    return this.properties.animationTimingFunction;\n  }\n  get closeButtonText() {\n    return this.properties.closeButtonText;\n  }\n  get counterSeparator() {\n    return this.properties.counterSeparator;\n  }\n  get counter() {\n    return this.currentImageIndex + 1 + this.counterSeparator + this.images.length;\n  }\n  emitState(type, state) {\n    if (state === 'initial-virtual-image' || state === 'initial-styles') {\n      return;\n    }\n    if (state === 'initial-default' || state === 'initial-thumbnail-image') {\n      state = 'initial';\n    }\n    this.eventService.emitChangeEvent({\n      type: type + ':' + state\n    });\n  }\n  setShowState(state) {\n    this.showState = state;\n    this.emitState('show-state', state);\n  }\n  setClosingState(state) {\n    this.closingState = state;\n    this.emitState('closing-state', state);\n  }\n  setAnimationDuration() {\n    this.hostStyleTransition = 'background-color ' + this.animationDuration + 'ms';\n    this.containerStyles.transition = 'all ' + this.animationDuration + 'ms ' + this.animationTimingFunction;\n  }\n  setBackgroundColor() {\n    this.hostStyleBackgroundColor = this.backgroundColor;\n  }\n  getContainerHeight() {\n    return this.thumbnailImagePosition.height / this.containerScale + 'px';\n  }\n  showThumbnailImage() {\n    this.thumbnailImage.style.opacity = '';\n  }\n  hideThumbnailImage() {\n    this.thumbnailImage.style.opacity = 0;\n  }\n  updateThumbnailPosition() {\n    this.containerStyles.transform = this.containerInitialPosition;\n  }\n};\nLightboxCommonComponent.ɵfac = function LightboxCommonComponent_Factory(t) {\n  return new (t || LightboxCommonComponent)(ɵngcc0.ɵɵdirectiveInject(EventService));\n};\nLightboxCommonComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: LightboxCommonComponent,\n  selectors: [[\"lightbox-common\"]],\n  viewQuery: function LightboxCommonComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c0, 7);\n      ɵngcc0.ɵɵviewQuery(_c1, 7);\n      ɵngcc0.ɵɵviewQuery(_c2, 7);\n      ɵngcc0.ɵɵviewQuery(_c3, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageFirst = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageSecond = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageLast = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._lightboxImage = _t.first);\n    }\n  },\n  hostVars: 4,\n  hostBindings: function LightboxCommonComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵstyleProp(\"transition\", ctx.hostStyleTransition)(\"background-color\", ctx.hostStyleBackgroundColor);\n    }\n  },\n  inputs: {\n    lightboxData: \"lightboxData\"\n  },\n  decls: 0,\n  vars: 0,\n  template: function LightboxCommonComponent_Template(rf, ctx) {},\n  encapsulation: 2\n});\nLightboxCommonComponent.ctorParameters = () => [{\n  type: EventService\n}];\n__decorate([Input()], LightboxCommonComponent.prototype, \"lightboxData\", void 0);\n__decorate([HostBinding('style.backgroundColor')], LightboxCommonComponent.prototype, \"hostStyleBackgroundColor\", void 0);\n__decorate([HostBinding('style.transition')], LightboxCommonComponent.prototype, \"hostStyleTransition\", void 0);\n__decorate([ViewChild('imageFirst', {\n  static: true\n})], LightboxCommonComponent.prototype, \"_imageFirst\", void 0);\n__decorate([ViewChild('imageSecond', {\n  static: true\n})], LightboxCommonComponent.prototype, \"_imageSecond\", void 0);\n__decorate([ViewChild('imageLast', {\n  static: true\n})], LightboxCommonComponent.prototype, \"_imageLast\", void 0);\n__decorate([ViewChild('lightboxImage', {\n  static: true\n})], LightboxCommonComponent.prototype, \"_lightboxImage\", void 0);\nlet LightboxComponent = class LightboxComponent extends LightboxCommonComponent {\n  constructor(elementRef, ref, eventService) {\n    super(eventService);\n    this.elementRef = elementRef;\n    this.ref = ref;\n    this.eventService = eventService;\n    this.spinnerHeight = 30;\n    this.minTimeout = 30;\n    this.preloaderTimeout = 100;\n    this.spinnerStyles = {\n      transform: ''\n    };\n    this.configThumbnailPreloader = true;\n    this.events = new EventEmitter();\n    this.hostShown = false;\n    this.hideControls = false;\n  }\n  get simpleMode() {\n    return this.properties.simpleMode;\n  }\n  get hostLightTheme() {\n    return this.properties.backgroundColor === 'white';\n  }\n  get currImagePath() {\n    let image = this.images[this.index];\n    let path;\n    if (!image) {\n      return false;\n    }\n    if (image.fullImage && image.fullImage.path) {\n      path = image.fullImage.path;\n    } else if (image.thumbnailImage && image.thumbnailImage.path) {\n      path = image.thumbnailImage.path;\n    } else if (image.path) {\n      path = image.path;\n    }\n    return path;\n  }\n  get prevImagePath() {\n    return this.images[this.prevIndex];\n  }\n  set prevImagePath(value) {\n    this.images[this.prevIndex] = value;\n  }\n  get isHiddenPrevArrow() {\n    return this.isFirstImage && !this.properties.loop || this.isZoomIn;\n  }\n  get isHiddenNextArrow() {\n    return this.isLastImage && !this.properties.loop || this.isZoomIn;\n  }\n  get isPreloader() {\n    return this.animationMode === 'zoom-preloader' && this.showState != 'animation-end' && this.currImageLoadingState === 'loading';\n  }\n  get imageOrientation() {\n    if (this.thumbnailImage.naturalWidth > this.thumbnailImage.naturalHeight) {\n      return 'horizontal';\n    } else {\n      return 'vertical';\n    }\n  }\n  scrolling() {\n    if (this.showState === 'initial-thumbnail-image' || this.showState === 'initial-virtual-image' || this.closingState === 'animation') {\n      this.updateThumbnailPosition();\n    }\n  }\n  onKeyDown(event) {\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.prev();\n        break;\n      case 'ArrowRight':\n        this.next();\n        break;\n      case 'Escape':\n        this.closeLightbox();\n        break;\n    }\n  }\n  onMouseEnter(event) {\n    this.hideControls = false;\n  }\n  transitionEnd(event) {\n    if (event.propertyName === \"transform\" && this.hostAnimation) {\n      this.hostAnimation = false;\n    }\n  }\n  ngOnInit() {\n    this.currentImageIndex = this.properties.index;\n    this.initialLightbox();\n  }\n  ngAfterViewInit() {\n    setTimeout(() => {\n      if (this.currImageLoadingState === 'not-loaded') {\n        this.currImageLoadingState = 'loading';\n      }\n    }, this.preloaderTimeout);\n    // Mode: default\n    if (this.animationMode === 'default') {\n      setTimeout(() => {\n        this.showLightboxAnimation();\n      }, this.minTimeout);\n    }\n  }\n  onImageLoaded() {\n    // When opening lightbox\n    if (this.animationMode === 'zoom-preloader' && this.showState === 'initial-thumbnail-image') {\n      this.initialLightboxVirtualImage();\n      setTimeout(() => {\n        this.currImageLoadingState = 'uploaded';\n        this.showLightboxAnimation();\n        if (this.properties.hideThumbnail) {\n          this.hideThumbnailImage();\n        }\n      }, this.minTimeout);\n    }\n    // When opening next / previous image\n    if (this.showState === 'animation-end') {\n      this.currImageLoadingState = 'uploaded';\n      if (this.properties.hideThumbnail) {\n        this.hideThumbnailImage();\n      }\n    }\n    this.ref.detectChanges();\n  }\n  onImageError(event) {\n    this.currImageLoadingState = 'error';\n    this.initialLightboxDefault();\n    setTimeout(() => {\n      this.showLightboxAnimation();\n    }, this.minTimeout);\n  }\n  onContainerClick(event) {\n    if (event.target === this.lightboxContainerElem.nativeElement || this.simpleMode) {\n      this.closeLightbox();\n    }\n  }\n  initialLightbox() {\n    this.setMaxDimensions();\n    this.setAnimationDuration();\n    switch (this.animationMode) {\n      case 'zoom-preloader':\n        this.initialLightboxThumbnailImage();\n        break;\n      case 'default':\n        this.initialLightboxDefault();\n        break;\n    }\n  }\n  initialLightboxDefault() {\n    this.showState = 'initial-default';\n    this.containerStyles = {\n      transform: 'translate3d(0, 0, 0)',\n      height: '100%',\n      width: '100%',\n      opacity: '0'\n    };\n    // next step: AfterViewInit\n  }\n\n  initialLightboxVirtualImage() {\n    this.setShowState('initial-virtual-image');\n    this.containerStyles = {\n      transform: this.containerInitialPosition,\n      height: this.virtualImageDimension.height + 'px',\n      width: this.virtualImageDimension.width + 'px'\n    };\n    // next step: onImageLoaded() -> showLightboxAnimation()\n  }\n\n  initialLightboxThumbnailImage() {\n    this.setShowState('initial-thumbnail-image');\n    this.containerStyles = {\n      transform: this.containerInitialPosition,\n      height: this.thumbnailImagePosition.height + 'px',\n      width: this.thumbnailImagePosition.width + 'px'\n    };\n    // next step: onImageLoaded()\n  }\n\n  showLightboxAnimation() {\n    this.hostAnimation = true;\n    this.setShowState('animation');\n    this.hostShown = true;\n    this.setBackgroundColor();\n    this.setAnimationDuration();\n    // Mode: zoom preloader\n    if (this.animationMode === 'zoom-preloader' && this.currImageLoadingState !== 'error') {\n      this.containerStyles.transform = this.containerFullscreenPosition;\n    }\n    // Mode: default\n    if (this.animationMode === 'default') {\n      this.containerStyles.opacity = '1';\n    }\n    // next step: handleLightboxTransitionEnd\n  }\n\n  showLightboxAnimationEnd() {\n    this.setShowState('animation-end');\n    this.containerStyles = {\n      transform: 'translate3d(0, 0, 0)',\n      height: '100%',\n      width: '100%'\n    };\n  }\n  closeLightbox() {\n    this.setClosingState('initial');\n    this.hostShown = false;\n    this.closeLightboxInitial();\n  }\n  closeLightboxInitial() {\n    this.setClosingState('initial-styles');\n    // Mode: zoom preloader\n    if (this.animationMode === 'zoom-preloader') {\n      this.containerStyles = {\n        transform: this.containerFullscreenPosition,\n        height: this.virtualImageDimension.height + 'px',\n        width: this.virtualImageDimension.width + 'px'\n      };\n    }\n    // Mode: default\n    if (this.animationMode === 'default') {\n      this.containerStyles.opacity = '1';\n    }\n    setTimeout(() => {\n      this.closeLightboxAnimation();\n    }, this.minTimeout);\n  }\n  closeLightboxAnimation() {\n    this.setClosingState('animation');\n    // Mode: zoom preloader\n    if (this.animationMode === 'zoom-preloader') {\n      this.hostAnimation = true;\n      this.containerStyles = {\n        transform: this.containerInitialPosition,\n        height: this.getContainerHeight(),\n        width: this.getContainerWidth()\n      };\n      this.hostStyleBackgroundColor = '';\n    }\n    // Mode: default\n    if (this.animationMode === 'default') {\n      this.hostAnimation = true;\n      this.containerStyles.opacity = '0';\n      this.hostStyleBackgroundColor = '';\n    }\n    this.setAnimationDuration();\n    // next step: handleLightboxTransitionEnd\n    if (this.animationDuration === 0) {\n      // in the future, change to a type conversion getter\n      this.closeLightboxAnimationEnd();\n    }\n  }\n  closeLightboxAnimationEnd() {\n    this.setClosingState('animation-end');\n    this.events.emit({\n      type: 'close'\n    });\n    // Mode: zoom preloader\n    if (this.animationMode === 'zoom-preloader') {\n      this.showThumbnailImage();\n    }\n  }\n  /*\r\n   * Transition End\r\n   */\n  handleLightboxTransitionEnd(event) {\n    if (this.showState === 'animation') {\n      this.showLightboxAnimationEnd();\n    }\n    // Last close step\n    if (this.closingState === 'animation') {\n      this.closeLightboxAnimationEnd();\n    }\n  }\n  next() {\n    if (this.animationMode === 'zoom-preloader') {\n      this.showThumbnailImage();\n    }\n    if (this.isLastImage) {\n      if (this.properties.loop) {\n        this.currentImageIndex = 0;\n      } else {\n        return;\n      }\n    } else {\n      this.currentImageIndex++;\n      this.currImageLoadingState = 'loading';\n    }\n    setTimeout(() => {\n      if (this.currImageLoadingState !== 'uploaded') {\n        this.currImageLoadingState = 'loading';\n      }\n    }, this.preloaderTimeout);\n  }\n  prev() {\n    if (this.animationMode === 'zoom-preloader') {\n      this.showThumbnailImage();\n    }\n    if (this.isFirstImage) {\n      if (this.properties.loop) {\n        this.currentImageIndex = this.latestImageIndex;\n      } else {\n        return;\n      }\n    } else {\n      this.currentImageIndex--;\n      this.currImageLoadingState = 'loading';\n    }\n    setTimeout(() => {\n      if (this.currImageLoadingState !== 'uploaded') {\n        this.currImageLoadingState = 'loading';\n      }\n    }, this.preloaderTimeout);\n  }\n  setMaxDimensions() {\n    this.lightboxImage.nativeElement.style.maxHeight = 'calc(' + this.properties.imageMaxHeight + ')';\n    this.lightboxImage.nativeElement.style.maxWidth = this.properties.imageMaxWidth;\n  }\n  handlePinchZoomEvents(event) {\n    if (event.type === \"zoom-in\") {\n      this.isZoomIn = true;\n    }\n    if (event.type === \"zoom-out\") {\n      this.isZoomIn = false;\n    }\n  }\n  getContainerWidth() {\n    return this.thumbnailImagePosition.width / this.containerScale + 'px';\n  }\n};\nLightboxComponent.ɵfac = function LightboxComponent_Factory(t) {\n  return new (t || LightboxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(EventService));\n};\nLightboxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n  type: LightboxComponent,\n  selectors: [[\"crystal-lightbox\"]],\n  viewQuery: function LightboxComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(_c4, 7);\n      ɵngcc0.ɵɵviewQuery(_c5, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prevImageElem = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.lightboxContainerElem = _t.first);\n    }\n  },\n  hostVars: 12,\n  hostBindings: function LightboxComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"scroll\", function LightboxComponent_scroll_HostBindingHandler() {\n        return ctx.scrolling();\n      }, false, ɵngcc0.ɵɵresolveWindow)(\"keydown\", function LightboxComponent_keydown_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      }, false, ɵngcc0.ɵɵresolveWindow)(\"mouseenter\", function LightboxComponent_mouseenter_HostBindingHandler($event) {\n        return ctx.onMouseEnter($event);\n      })(\"transitionend\", function LightboxComponent_transitionend_HostBindingHandler($event) {\n        return ctx.transitionEnd($event);\n      });\n    }\n    if (rf & 2) {\n      ɵngcc0.ɵɵstyleProp(\"background-color\", ctx.hostStyleBackgroundColor);\n      ɵngcc0.ɵɵclassProp(\"lightbox-shown\", ctx.hostShown)(\"lightbox-hide-controls\", ctx.hideControls)(\"lightbox-simple-mode\", ctx.simpleMode)(\"lightbox-light\", ctx.hostLightTheme)(\"lightbox-animation\", ctx.hostAnimation);\n    }\n  },\n  features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n  decls: 11,\n  vars: 11,\n  consts: [[\"class\", \"lightbox-counter\", 4, \"ngIf\"], [\"class\", \"lightbox-close\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"lightbox-spinner\", 4, \"ngIf\"], [1, \"lightbox-container\", 3, \"ngStyle\", \"transitionend\", \"click\"], [\"lightboxContainer\", \"\"], [\"class\", \"lightbox-preloader\", 4, \"ngIf\"], [\"class\", \"lightbox-error\", 4, \"ngIf\"], [1, \"lightbox-curr-image\", 3, \"src\", \"load\", \"error\"], [\"lightboxImage\", \"\"], [1, \"lightbox-prev\", 3, \"hidden\", \"click\"], [1, \"lightbox-next\", 3, \"hidden\", \"click\"], [1, \"lightbox-counter\"], [1, \"lightbox-close\", 3, \"click\"], [1, \"lightbox-spinner\"], [1, \"lightbox-preloader\"], [1, \"lightbox-error\"]],\n  template: function LightboxComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵtemplate(0, LightboxComponent_div_0_Template, 2, 1, \"div\", 0);\n      ɵngcc0.ɵɵtemplate(1, LightboxComponent_div_1_Template, 2, 1, \"div\", 1);\n      ɵngcc0.ɵɵtemplate(2, LightboxComponent_div_2_Template, 1, 0, \"div\", 2);\n      ɵngcc0.ɵɵelementStart(3, \"div\", 3, 4);\n      ɵngcc0.ɵɵlistener(\"transitionend\", function LightboxComponent_Template_div_transitionend_3_listener($event) {\n        return ctx.handleLightboxTransitionEnd($event);\n      })(\"click\", function LightboxComponent_Template_div_click_3_listener($event) {\n        return ctx.onContainerClick($event);\n      });\n      ɵngcc0.ɵɵtemplate(5, LightboxComponent_div_5_Template, 2, 0, \"div\", 5);\n      ɵngcc0.ɵɵtemplate(6, LightboxComponent_div_6_Template, 2, 0, \"div\", 6);\n      ɵngcc0.ɵɵelementStart(7, \"img\", 7, 8);\n      ɵngcc0.ɵɵlistener(\"load\", function LightboxComponent_Template_img_load_7_listener() {\n        return ctx.onImageLoaded();\n      })(\"error\", function LightboxComponent_Template_img_error_7_listener($event) {\n        return ctx.onImageError($event);\n      });\n      ɵngcc0.ɵɵelementEnd()();\n      ɵngcc0.ɵɵelementStart(9, \"div\", 9);\n      ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_9_listener() {\n        return ctx.prev();\n      });\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelementStart(10, \"div\", 10);\n      ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_10_listener() {\n        return ctx.next();\n      });\n      ɵngcc0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.properties.counter && ctx.images.length > 1);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.simpleMode);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.currImageLoadingState === \"loading\" && ctx.showState === \"animation-end\");\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.containerStyles);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isPreloader);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.currImageLoadingState === \"error\" && !ctx.closingState);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵclassProp(\"lightbox-show\", ctx.currImageLoadingState === \"uploaded\");\n      ɵngcc0.ɵɵproperty(\"src\", ctx.currImagePath, ɵngcc0.ɵɵsanitizeUrl);\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"hidden\", ctx.isHiddenPrevArrow);\n      ɵngcc0.ɵɵadvance(1);\n      ɵngcc0.ɵɵproperty(\"hidden\", ctx.isHiddenNextArrow);\n    }\n  },\n  dependencies: [ɵngcc1.NgIf, ɵngcc1.NgStyle],\n  styles: [\".lightbox-spinner[_ngcontent-%COMP%], .lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite _ngcontent-%COMP%_lightbox-load;animation:1.5s ease-in-out infinite _ngcontent-%COMP%_lightbox-load}.lightbox-spinner[_ngcontent-%COMP%]{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0}.lightbox-spinner[_ngcontent-%COMP%]:before{left:-32px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.lightbox-spinner[_ngcontent-%COMP%]:after{left:32px}@-webkit-keyframes _ngcontent-%COMP%_lightbox-load{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes _ngcontent-%COMP%_lightbox-load{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}.lightbox-shown[_nghost-%COMP%]{opacity:1}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:.5;transition-delay:.1s}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]:hover{opacity:1;transition-delay:0}.lightbox-shown[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{opacity:1}.lightbox-hide-controls[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0}.lightbox-simple-mode[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{cursor:zoom-out}[_nghost-%COMP%]:not(.lightbox-animation)   .lightbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;top:0;left:0;height:100%}.lightbox-light[_nghost-%COMP%]{color:#000;text-shadow:none}[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;text-shadow:0 0 1px rgba(0,0,0,.65);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10000}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;max-width:100%;max-height:100%}[_nghost-%COMP%]   img.lightbox-curr-image.lightbox-show[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   img.lightbox-curr-image[_ngcontent-%COMP%]{opacity:0;z-index:10}[_nghost-%COMP%]   .lightbox-container.lightbox-hide[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform-origin:top left}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute}[_nghost-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{position:absolute;top:51%;left:50%;margin-top:-15px;margin-left:-5px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{margin-top:-9px;margin-left:-3px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{width:6px;height:6px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{left:-21px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after{left:21px}[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;z-index:30}[_nghost-%COMP%]   .lightbox-description[_ngcontent-%COMP%]{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}[_nghost-%COMP%]   .lightbox-error[_ngcontent-%COMP%]{color:rgba(255,255,255,.75);font-size:19px}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{width:100px;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0;transition:opacity 150ms cubic-bezier(.475,.105,.445,.945)}\"]\n});\nLightboxComponent.ctorParameters = () => [{\n  type: ElementRef\n}, {\n  type: ChangeDetectorRef\n}, {\n  type: EventService\n}];\n__decorate([HostBinding('class.lightbox-shown')], LightboxComponent.prototype, \"hostShown\", void 0);\n__decorate([HostBinding('class.lightbox-hide-controls')], LightboxComponent.prototype, \"hideControls\", void 0);\n__decorate([HostBinding('class.lightbox-animation')], LightboxComponent.prototype, \"hostAnimation\", void 0);\n__decorate([HostBinding('class.lightbox-simple-mode')], LightboxComponent.prototype, \"simpleMode\", null);\n__decorate([HostBinding('class.lightbox-light')], LightboxComponent.prototype, \"hostLightTheme\", null);\n__decorate([HostBinding('style.backgroundColor')], LightboxComponent.prototype, \"hostStyleBackgroundColor\", void 0);\n__decorate([ViewChild('prevImageElem', {\n  static: true\n})], LightboxComponent.prototype, \"prevImageElem\", void 0);\n__decorate([ViewChild('lightboxContainer', {\n  static: true\n})], LightboxComponent.prototype, \"lightboxContainerElem\", void 0);\n__decorate([HostListener('window:scroll')], LightboxComponent.prototype, \"scrolling\", null);\n__decorate([HostListener('window:keydown', ['$event'])], LightboxComponent.prototype, \"onKeyDown\", null);\n__decorate([HostListener(\"mouseenter\", ['$event'])], LightboxComponent.prototype, \"onMouseEnter\", null);\n__decorate([HostListener('transitionend', ['$event'])], LightboxComponent.prototype, \"transitionEnd\", null);\nconst DefaultProperties = {\n  loop: false,\n  index: 0,\n  counter: false,\n  imageMaxHeight: \"100%\",\n  imageMaxWidth: \"100%\",\n  animationDuration: 350,\n  animationMode: 'zoom-preloader',\n  animationTimingFunction: 'cubic-bezier(0.475, 0.105, 0.445, 0.945)',\n  closeButtonText: 'Close',\n  counterSeparator: '/',\n  disable: false,\n  simpleMode: false,\n  backgroundColor: 'black',\n  backgroundOpacity: 1,\n  hideThumbnail: true,\n  gestureEnable: false\n};\nlet CrystalLightbox = class CrystalLightbox {\n  constructor(componentFactoryResolver, appRef, injector) {\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.appRef = appRef;\n    this.injector = injector;\n  }\n  appendComponentToBody(component, lightboxData) {\n    const componentRef = this.componentFactoryResolver.resolveComponentFactory(component).create(this.injector);\n    componentRef.instance.lightboxData = lightboxData;\n    this.appRef.attachView(componentRef.hostView);\n    const domElem = componentRef.hostView.rootNodes[0];\n    // Add to body\n    document.body.appendChild(domElem);\n    componentRef.instance.events.subscribe(event => {\n      if (event.type === 'close') {\n        this.appRef.detachView(componentRef.hostView);\n        componentRef.destroy();\n      }\n    });\n  }\n  open(lightboxData) {\n    lightboxData.properties = this.applyPropertieDefaults(DefaultProperties, lightboxData.properties);\n    let component = this.getLightboxComponent();\n    this.appendComponentToBody(component, lightboxData);\n  }\n  getLightboxComponent() {\n    return LightboxComponent;\n  }\n  applyPropertieDefaults(defaultProperties, properties) {\n    if (!properties) {\n      properties = {};\n    }\n    if (!properties.index) {\n      properties.index = 0;\n    }\n    this._defaultProperties = Object.assign({}, defaultProperties);\n    return Object.assign(this._defaultProperties, properties);\n  }\n};\nCrystalLightbox.ɵfac = function CrystalLightbox_Factory(t) {\n  return new (t || CrystalLightbox)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.ApplicationRef), ɵngcc0.ɵɵinject(ɵngcc0.Injector));\n};\nCrystalLightbox.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: CrystalLightbox,\n  factory: function (t) {\n    return CrystalLightbox.ɵfac(t);\n  }\n});\nCrystalLightbox.ctorParameters = () => [{\n  type: ComponentFactoryResolver\n}, {\n  type: ApplicationRef\n}, {\n  type: Injector\n}];\nlet LightboxDirective = class LightboxDirective {\n  constructor(lightbox, eventService, elementRef) {\n    this.lightbox = lightbox;\n    this.eventService = eventService;\n    this.elementRef = elementRef;\n    this.properties = {};\n    this.events = new EventEmitter();\n    this.hostLightboxGroup = true;\n    this.globalEventsSubscription = this.eventService.emitter.subscribe(event => {\n      this.handleGlobalEvents(event);\n    });\n  }\n  get hostSimpleMode() {\n    return this.simpleMode;\n  }\n  get isGroupImage() {\n    return this.elementRef.nativeElement.closest(\".lightbox-group\");\n  }\n  onClick(event) {\n    if (this.disable) {\n      return;\n    }\n    if (this.isGroupImage) {\n      this.eventService.emitChangeEvent({\n        type: 'thumbnail:click',\n        elementRef: this.elementRef,\n        properties: this.properties\n      });\n    } else {\n      this.image = this.getImage();\n      this.lightbox.open({\n        images: [this.image],\n        properties: this.properties,\n        index: 0\n      });\n    }\n  }\n  ngOnChanges(changes) {\n    this.properties = Object.assign({}, this.properties, this.getProperties(changes));\n  }\n  handleGlobalEvents(event) {\n    this.events.emit(event);\n  }\n  getImage() {\n    let image = {};\n    const nativeElement = this.elementRef.nativeElement;\n    if (this.fullImage) {\n      image.fullImage = this.fullImage;\n    }\n    image.thumbnailImage = {\n      path: nativeElement.src,\n      height: nativeElement.naturalHeight,\n      width: nativeElement.naturalWidth\n    };\n    image.nativeElement = nativeElement;\n    return image;\n  }\n  getProperties(changes) {\n    let properties = {};\n    for (var prop in changes) {\n      if (prop !== 'fullImage') {\n        properties[prop] = changes[prop].currentValue;\n      }\n    }\n    return properties;\n  }\n};\nLightboxDirective.ɵfac = function LightboxDirective_Factory(t) {\n  return new (t || LightboxDirective)(ɵngcc0.ɵɵdirectiveInject(CrystalLightbox), ɵngcc0.ɵɵdirectiveInject(EventService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n};\nLightboxDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LightboxDirective,\n  selectors: [[\"\", \"lightbox\", \"\"]],\n  hostVars: 4,\n  hostBindings: function LightboxDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"click\", function LightboxDirective_click_HostBindingHandler($event) {\n        return ctx.onClick($event);\n      });\n    }\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"lightbox-single\", ctx.hostLightboxGroup)(\"lightbox-simple-mode\", ctx.hostSimpleMode);\n    }\n  },\n  inputs: {\n    properties: \"properties\",\n    fullImage: \"fullImage\",\n    loop: \"loop\",\n    backgroundOpacity: \"backgroundOpacity\",\n    counter: \"counter\",\n    imageMaxHeight: \"imageMaxHeight\",\n    imageMaxWidth: \"imageMaxWidth\",\n    animationDuration: \"animationDuration\",\n    animationMode: \"animationMode\",\n    animationTimingFunction: \"animationTimingFunction\",\n    closeButtonText: \"closeButtonText\",\n    counterSeparator: \"counterSeparator\",\n    disable: \"disable\",\n    simpleMode: \"simpleMode\",\n    backgroundColor: \"backgroundColor\",\n    hideThumbnail: \"hideThumbnail\",\n    gestureEnable: \"gestureEnable\"\n  },\n  outputs: {\n    events: \"events\"\n  },\n  features: [ɵngcc0.ɵɵNgOnChangesFeature]\n});\nLightboxDirective.ctorParameters = () => [{\n  type: CrystalLightbox\n}, {\n  type: EventService\n}, {\n  type: ElementRef\n}];\n__decorate([Input()], LightboxDirective.prototype, \"fullImage\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"properties\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"loop\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"backgroundOpacity\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"counter\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"imageMaxHeight\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"imageMaxWidth\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"animationDuration\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"animationMode\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"animationTimingFunction\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"closeButtonText\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"counterSeparator\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"disable\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"simpleMode\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"backgroundColor\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"hideThumbnail\", void 0);\n__decorate([Input()], LightboxDirective.prototype, \"gestureEnable\", void 0);\n__decorate([Output()], LightboxDirective.prototype, \"events\", void 0);\n__decorate([HostBinding('class.lightbox-single')], LightboxDirective.prototype, \"hostLightboxGroup\", void 0);\n__decorate([HostBinding('class.lightbox-simple-mode')], LightboxDirective.prototype, \"hostSimpleMode\", null);\n__decorate([HostListener('click', ['$event'])], LightboxDirective.prototype, \"onClick\", null);\nlet LightboxGroupDirective = class LightboxGroupDirective {\n  constructor(eventService, lightbox) {\n    this.eventService = eventService;\n    this.lightbox = lightbox;\n    this.thumbnailImages = [];\n    this.images = [];\n    this.properties = {};\n    this.hostLightboxGroup = true;\n    this.globalEventsSubscription = this.eventService.emitter.subscribe(event => {\n      this.handleGlobalEvents(event);\n    });\n  }\n  get lightboxDirectiveList() {\n    if (this._lightboxDirectiveList) {\n      return this._lightboxDirectiveList.toArray();\n    } else {\n      return [];\n    }\n  }\n  handleGlobalEvents(event) {\n    if (event.type === 'thumbnail:click') {\n      this.thumbnailImageElement = event.elementRef.nativeElement;\n      this.thumbnailImages = this.getThumbnailImages();\n      this.thumbnailImageIndex = this.getThumbnailImageIndex(this.thumbnailImageElement);\n      if (this.thumbnailImageIndex == undefined) {\n        return;\n      }\n      this.thumbnailLightboxDirective = this.getThumbnailLightboxDirective(this.thumbnailImageIndex);\n      this.images = this.getImages();\n      this.properties = event.properties;\n      this.properties.index = this.thumbnailImageIndex;\n      this.lightbox.open({\n        images: this.images,\n        //index: this.thumbnailImageIndex,\n        properties: this.properties\n      });\n    }\n  }\n  getThumbnailImageIndex(element) {\n    const images = this.thumbnailImages;\n    for (var i = 0; i < images.length; i++) {\n      if (element === images[i]) {\n        return i;\n      }\n    }\n  }\n  getThumbnailLightboxDirective(index) {\n    return this.lightboxDirectiveList[index];\n  }\n  getThumbnailImages() {\n    let thumbnailImages = [];\n    this.lightboxDirectiveList.forEach(el => {\n      thumbnailImages.push(el['elementRef'].nativeElement);\n    });\n    return thumbnailImages;\n  }\n  getImages() {\n    let images = [];\n    this.lightboxDirectiveList.forEach(el => {\n      let image = {};\n      const nativeElement = el['elementRef'].nativeElement;\n      if (el.fullImage) {\n        image.fullImage = el.fullImage;\n      }\n      image.thumbnailImage = {\n        path: nativeElement.src,\n        height: nativeElement.naturalHeight,\n        width: nativeElement.naturalWidth\n      };\n      image.nativeElement = nativeElement;\n      images.push(image);\n    });\n    return images;\n  }\n};\nLightboxGroupDirective.ɵfac = function LightboxGroupDirective_Factory(t) {\n  return new (t || LightboxGroupDirective)(ɵngcc0.ɵɵdirectiveInject(EventService), ɵngcc0.ɵɵdirectiveInject(CrystalLightbox));\n};\nLightboxGroupDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: LightboxGroupDirective,\n  selectors: [[\"\", \"lightbox-group\", \"\"]],\n  contentQueries: function LightboxGroupDirective_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, LightboxDirective, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._lightboxDirectiveList = _t);\n    }\n  },\n  hostVars: 2,\n  hostBindings: function LightboxGroupDirective_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      ɵngcc0.ɵɵclassProp(\"lightbox-group\", ctx.hostLightboxGroup);\n    }\n  }\n});\nLightboxGroupDirective.ctorParameters = () => [{\n  type: EventService\n}, {\n  type: CrystalLightbox\n}];\n__decorate([HostBinding('class.lightbox-group')], LightboxGroupDirective.prototype, \"hostLightboxGroup\", void 0);\n__decorate([ContentChildren(LightboxDirective, {\n  descendants: true\n})], LightboxGroupDirective.prototype, \"_lightboxDirectiveList\", void 0);\nlet CrystalLightboxModule = class CrystalLightboxModule {};\nCrystalLightboxModule.ɵfac = function CrystalLightboxModule_Factory(t) {\n  return new (t || CrystalLightboxModule)();\n};\nCrystalLightboxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: CrystalLightboxModule\n});\nCrystalLightboxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n  providers: [CrystalLightbox, EventService],\n  imports: [CommonModule]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(EventService, [{\n    type: Injectable\n  }], function () {\n    return [];\n  }, null);\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxCommonComponent, [{\n    type: Component,\n    args: [{\n      selector: 'lightbox-common',\n      template: ''\n    }]\n  }], function () {\n    return [{\n      type: EventService\n    }];\n  }, {\n    hostStyleTransition: [{\n      type: HostBinding,\n      args: ['style.transition']\n    }],\n    hostStyleBackgroundColor: [{\n      type: HostBinding,\n      args: ['style.backgroundColor']\n    }],\n    lightboxData: [{\n      type: Input\n    }],\n    _imageFirst: [{\n      type: ViewChild,\n      args: ['imageFirst', {\n        static: true\n      }]\n    }],\n    _imageSecond: [{\n      type: ViewChild,\n      args: ['imageSecond', {\n        static: true\n      }]\n    }],\n    _imageLast: [{\n      type: ViewChild,\n      args: ['imageLast', {\n        static: true\n      }]\n    }],\n    _lightboxImage: [{\n      type: ViewChild,\n      args: ['lightboxImage', {\n        static: true\n      }]\n    }]\n  });\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxComponent, [{\n    type: Component,\n    args: [{\n      selector: 'crystal-lightbox',\n      template: \"<div class=\\\"lightbox-counter\\\" *ngIf=\\\"properties.counter && images.length > 1\\\">{{counter}}</div>\\n<div class=\\\"lightbox-close\\\" *ngIf=\\\"!simpleMode\\\" (click)=\\\"closeLightbox()\\\">{{closeButtonText}}</div>\\n<div class=\\\"lightbox-spinner\\\" \\n\\t*ngIf=\\\"currImageLoadingState === 'loading' && showState === 'animation-end'\\\"></div>\\n<div class=\\\"lightbox-container\\\" \\n\\t#lightboxContainer\\n\\t[ngStyle]=\\\"containerStyles\\\"\\n\\t(transitionend)=\\\"handleLightboxTransitionEnd($event)\\\"\\n\\t(click)=\\\"onContainerClick($event)\\\">\\n\\n\\t<div class=\\\"lightbox-preloader\\\" *ngIf=\\\"isPreloader\\\">\\n\\t\\t<div class=\\\"lightbox-spinner\\\"></div>\\n\\t</div>\\n\\n\\t<div class=\\\"lightbox-error\\\" *ngIf=\\\"currImageLoadingState === 'error' && !closingState\\\">Failed to load image</div>\\n\\n\\t<img class=\\\"lightbox-curr-image\\\" \\n\\t\\t#lightboxImage\\n\\t\\t[src]=\\\"currImagePath\\\" \\n\\t\\t[class.lightbox-show]=\\\"currImageLoadingState === 'uploaded'\\\" \\n\\t\\t(load)=\\\"onImageLoaded()\\\"\\n\\t\\t(error)=\\\"onImageError($event)\\\" />\\n</div>\\n\\n<div class=\\\"lightbox-prev\\\" [hidden]=\\\"isHiddenPrevArrow\\\" (click)=\\\"prev()\\\"></div>\\n<div class=\\\"lightbox-next\\\" [hidden]=\\\"isHiddenNextArrow\\\" (click)=\\\"next()\\\"></div>\",\n      styles: [\".lightbox-spinner,.lightbox-spinner:after,.lightbox-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite lightbox-load;animation:1.5s ease-in-out infinite lightbox-load}.lightbox-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.lightbox-spinner:after,.lightbox-spinner:before{content:\\\"\\\";position:absolute;top:0}.lightbox-spinner:before{left:-32px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.lightbox-spinner:after{left:32px}@-webkit-keyframes lightbox-load{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes lightbox-load{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host.lightbox-shown{opacity:1}:host.lightbox-shown .lightbox-close,:host.lightbox-shown .lightbox-next,:host.lightbox-shown .lightbox-prev{opacity:.5;transition-delay:.1s}:host.lightbox-shown .lightbox-close:hover,:host.lightbox-shown .lightbox-next:hover,:host.lightbox-shown .lightbox-prev:hover{opacity:1;transition-delay:0}:host.lightbox-shown .lightbox-counter{opacity:1}:host.lightbox-hide-controls .lightbox-close,:host.lightbox-hide-controls .lightbox-next,:host.lightbox-hide-controls .lightbox-prev{opacity:0}:host.lightbox-simple-mode .lightbox-container{cursor:zoom-out}:host:not(.lightbox-animation) .lightbox-container{display:flex;align-items:center;justify-content:center;top:0;left:0;height:100%}:host.lightbox-light{color:#000;text-shadow:none}:host{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;text-shadow:0 0 1px rgba(0,0,0,.65);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10000}:host img{opacity:1;max-width:100%;max-height:100%}:host img.lightbox-curr-image.lightbox-show{opacity:1}:host img.lightbox-curr-image{opacity:0;z-index:10}:host .lightbox-container.lightbox-hide{display:none}:host .lightbox-container{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform-origin:top left}:host .lightbox-preloader{background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute}:host .lightbox-spinner{position:absolute;top:51%;left:50%;margin-top:-15px;margin-left:-5px}:host .lightbox-preloader .lightbox-spinner{margin-top:-9px;margin-left:-3px}:host .lightbox-preloader .lightbox-spinner,:host .lightbox-preloader .lightbox-spinner:after,:host .lightbox-preloader .lightbox-spinner:before{width:6px;height:6px}:host .lightbox-preloader .lightbox-spinner:before{left:-21px}:host .lightbox-preloader .lightbox-spinner:after{left:21px}:host .lightbox-counter{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;z-index:30}:host .lightbox-description{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}:host .lightbox-error{color:rgba(255,255,255,.75);font-size:19px}:host .lightbox-close{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out}:host .lightbox-next,:host .lightbox-prev{width:100px;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}:host .lightbox-prev{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}:host .lightbox-next{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}:host .lightbox-close,:host .lightbox-counter,:host .lightbox-next,:host .lightbox-prev{opacity:0;transition:opacity 150ms cubic-bezier(.475,.105,.445,.945)}\"]\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: EventService\n    }];\n  }, {\n    hostShown: [{\n      type: HostBinding,\n      args: ['class.lightbox-shown']\n    }],\n    hideControls: [{\n      type: HostBinding,\n      args: ['class.lightbox-hide-controls']\n    }],\n    simpleMode: [{\n      type: HostBinding,\n      args: ['class.lightbox-simple-mode']\n    }],\n    hostLightTheme: [{\n      type: HostBinding,\n      args: ['class.lightbox-light']\n    }],\n    scrolling: [{\n      type: HostListener,\n      args: ['window:scroll']\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['window:keydown', ['$event']]\n    }],\n    onMouseEnter: [{\n      type: HostListener,\n      args: [\"mouseenter\", ['$event']]\n    }],\n    transitionEnd: [{\n      type: HostListener,\n      args: ['transitionend', ['$event']]\n    }],\n    hostAnimation: [{\n      type: HostBinding,\n      args: ['class.lightbox-animation']\n    }],\n    hostStyleBackgroundColor: [{\n      type: HostBinding,\n      args: ['style.backgroundColor']\n    }],\n    prevImageElem: [{\n      type: ViewChild,\n      args: ['prevImageElem', {\n        static: true\n      }]\n    }],\n    lightboxContainerElem: [{\n      type: ViewChild,\n      args: ['lightboxContainer', {\n        static: true\n      }]\n    }]\n  });\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CrystalLightbox, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: ɵngcc0.ComponentFactoryResolver\n    }, {\n      type: ɵngcc0.ApplicationRef\n    }, {\n      type: ɵngcc0.Injector\n    }];\n  }, null);\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[lightbox]'\n    }]\n  }], function () {\n    return [{\n      type: CrystalLightbox\n    }, {\n      type: EventService\n    }, {\n      type: ɵngcc0.ElementRef\n    }];\n  }, {\n    properties: [{\n      type: Input\n    }],\n    events: [{\n      type: Output\n    }],\n    hostLightboxGroup: [{\n      type: HostBinding,\n      args: ['class.lightbox-single']\n    }],\n    hostSimpleMode: [{\n      type: HostBinding,\n      args: ['class.lightbox-simple-mode']\n    }],\n    onClick: [{\n      type: HostListener,\n      args: ['click', ['$event']]\n    }],\n    fullImage: [{\n      type: Input\n    }],\n    loop: [{\n      type: Input\n    }],\n    backgroundOpacity: [{\n      type: Input\n    }],\n    counter: [{\n      type: Input\n    }],\n    imageMaxHeight: [{\n      type: Input\n    }],\n    imageMaxWidth: [{\n      type: Input\n    }],\n    animationDuration: [{\n      type: Input\n    }],\n    animationMode: [{\n      type: Input\n    }],\n    animationTimingFunction: [{\n      type: Input\n    }],\n    closeButtonText: [{\n      type: Input\n    }],\n    counterSeparator: [{\n      type: Input\n    }],\n    disable: [{\n      type: Input\n    }],\n    simpleMode: [{\n      type: Input\n    }],\n    backgroundColor: [{\n      type: Input\n    }],\n    hideThumbnail: [{\n      type: Input\n    }],\n    gestureEnable: [{\n      type: Input\n    }]\n  });\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxGroupDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[lightbox-group]'\n    }]\n  }], function () {\n    return [{\n      type: EventService\n    }, {\n      type: CrystalLightbox\n    }];\n  }, {\n    hostLightboxGroup: [{\n      type: HostBinding,\n      args: ['class.lightbox-group']\n    }],\n    _lightboxDirectiveList: [{\n      type: ContentChildren,\n      args: [LightboxDirective, {\n        descendants: true\n      }]\n    }]\n  });\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CrystalLightboxModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [LightboxCommonComponent, LightboxComponent, LightboxDirective, LightboxGroupDirective],\n      imports: [CommonModule],\n      exports: [LightboxDirective, LightboxGroupDirective],\n      providers: [CrystalLightbox, EventService],\n      bootstrap: [],\n      entryComponents: [LightboxComponent]\n    }]\n  }], null, null);\n})();\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CrystalLightboxModule, {\n    declarations: function () {\n      return [LightboxCommonComponent, LightboxComponent, LightboxDirective, LightboxGroupDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [LightboxDirective, LightboxGroupDirective];\n    }\n  });\n})();\n\n/*\r\n * Public API Surface of angular-lightbox\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { CrystalLightboxModule, EventService, LightboxDirective, LightboxGroupDirective, LightboxCommonComponent as ɵa, LightboxComponent as ɵb, CrystalLightbox as ɵc };","map":{"version":3,"names":["__decorate","Injectable","Input","HostBinding","ViewChild","Component","EventEmitter","ElementRef","ChangeDetectorRef","HostListener","ComponentFactoryResolver","ApplicationRef","Injector","Output","Directive","ContentChildren","NgModule","CommonModule","ReplaySubject","ɵngcc0","ɵngcc1","_c0","_c1","_c2","_c3","_c4","_c5","LightboxComponent_div_0_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r0","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate","counter","LightboxComponent_div_1_Template","_r8","ɵɵgetCurrentView","ɵɵlistener","LightboxComponent_div_1_Template_div_click_0_listener","ɵɵrestoreView","ctx_r7","ɵɵresetView","closeLightbox","ctx_r1","closeButtonText","LightboxComponent_div_2_Template","ɵɵelement","LightboxComponent_div_5_Template","LightboxComponent_div_6_Template","EventService","constructor","emitter","emitChangeEvent","data","next","ɵfac","EventService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","Utils","mobileCheck","check","a","test","substr","navigator","userAgent","vendor","LightboxCommonComponent","eventService","currentImageIndex","indexCurrentSlide","containerStyles","transition","transform","width","height","opacity","currImageLoadingState","isMobile","lightboxImage","_lightboxImage","lightboxImageElement","nativeElement","lightboxImageNaturalHeight","naturalHeight","lightboxImageNaturalWidth","naturalWidth","index","properties","lightboxData","images","image","thumbnailImage","thumbnailImagePosition","getBoundingClientRect","virtualImageDimension","imageAspectRatio","windowWidth","document","body","clientWidth","windowHeight","window","innerHeight","isImageLargerWindow","Number","parseInt","containerInitialPosition","scale","showState","containerScale","top","left","containerFullscreenPosition","imageNaturalWidth","imageNaturalHeight","isFirstImage","loop","isLastImage","latestImageIndex","length","backgroundColor","backgroundOpacity","color","animationDuration","animationMode","animationTimingFunction","counterSeparator","emitState","type","state","setShowState","setClosingState","closingState","setAnimationDuration","hostStyleTransition","setBackgroundColor","hostStyleBackgroundColor","getContainerHeight","showThumbnailImage","style","hideThumbnailImage","updateThumbnailPosition","LightboxCommonComponent_Factory","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","LightboxCommonComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","_imageFirst","first","_imageSecond","_imageLast","hostVars","hostBindings","LightboxCommonComponent_HostBindings","ɵɵstyleProp","inputs","decls","vars","template","LightboxCommonComponent_Template","encapsulation","ctorParameters","prototype","static","LightboxComponent","elementRef","ref","spinnerHeight","minTimeout","preloaderTimeout","spinnerStyles","configThumbnailPreloader","events","hostShown","hideControls","simpleMode","hostLightTheme","currImagePath","path","fullImage","prevImagePath","prevIndex","value","isHiddenPrevArrow","isZoomIn","isHiddenNextArrow","isPreloader","imageOrientation","scrolling","onKeyDown","event","key","prev","onMouseEnter","transitionEnd","propertyName","hostAnimation","ngOnInit","initialLightbox","ngAfterViewInit","setTimeout","showLightboxAnimation","onImageLoaded","initialLightboxVirtualImage","hideThumbnail","detectChanges","onImageError","initialLightboxDefault","onContainerClick","target","lightboxContainerElem","setMaxDimensions","initialLightboxThumbnailImage","showLightboxAnimationEnd","closeLightboxInitial","closeLightboxAnimation","getContainerWidth","closeLightboxAnimationEnd","emit","handleLightboxTransitionEnd","maxHeight","imageMaxHeight","maxWidth","imageMaxWidth","handlePinchZoomEvents","LightboxComponent_Factory","LightboxComponent_Query","prevImageElem","LightboxComponent_HostBindings","LightboxComponent_scroll_HostBindingHandler","ɵɵresolveWindow","LightboxComponent_keydown_HostBindingHandler","$event","LightboxComponent_mouseenter_HostBindingHandler","LightboxComponent_transitionend_HostBindingHandler","ɵɵclassProp","features","ɵɵInheritDefinitionFeature","consts","LightboxComponent_Template","ɵɵtemplate","LightboxComponent_Template_div_transitionend_3_listener","LightboxComponent_Template_div_click_3_listener","LightboxComponent_Template_img_load_7_listener","LightboxComponent_Template_img_error_7_listener","LightboxComponent_Template_div_click_9_listener","LightboxComponent_Template_div_click_10_listener","ɵɵproperty","ɵɵsanitizeUrl","dependencies","NgIf","NgStyle","styles","DefaultProperties","disable","gestureEnable","CrystalLightbox","componentFactoryResolver","appRef","injector","appendComponentToBody","component","componentRef","resolveComponentFactory","create","instance","attachView","hostView","domElem","rootNodes","appendChild","subscribe","detachView","destroy","open","applyPropertieDefaults","getLightboxComponent","defaultProperties","_defaultProperties","Object","assign","CrystalLightbox_Factory","ɵɵinject","LightboxDirective","lightbox","hostLightboxGroup","globalEventsSubscription","handleGlobalEvents","hostSimpleMode","isGroupImage","closest","onClick","getImage","ngOnChanges","changes","getProperties","src","prop","currentValue","LightboxDirective_Factory","ɵdir","ɵɵdefineDirective","LightboxDirective_HostBindings","LightboxDirective_click_HostBindingHandler","outputs","ɵɵNgOnChangesFeature","LightboxGroupDirective","thumbnailImages","lightboxDirectiveList","_lightboxDirectiveList","toArray","thumbnailImageElement","getThumbnailImages","thumbnailImageIndex","getThumbnailImageIndex","undefined","thumbnailLightboxDirective","getThumbnailLightboxDirective","getImages","element","i","forEach","el","push","LightboxGroupDirective_Factory","contentQueries","LightboxGroupDirective_ContentQueries","dirIndex","ɵɵcontentQuery","LightboxGroupDirective_HostBindings","descendants","CrystalLightboxModule","CrystalLightboxModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","imports","ngDevMode","ɵsetClassMetadata","args","selector","declarations","exports","bootstrap","entryComponents","ngJitMode","ɵɵsetNgModuleScope","ɵa","ɵb","ɵc"],"sources":["C:/Users/yaasm/IdeaProjects/CloudUP_FrontTestYassmine/node_modules/@crystalui/angular-lightbox/__ivy_ngcc__/fesm2015/crystalui-angular-lightbox.js"],"sourcesContent":["import { __decorate } from 'tslib';\nimport { Injectable, Input, HostBinding, ViewChild, Component, EventEmitter, ElementRef, ChangeDetectorRef, HostListener, ComponentFactoryResolver, ApplicationRef, Injector, Output, Directive, ContentChildren, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReplaySubject } from 'rxjs';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nconst _c0 = [\"imageFirst\"];\nconst _c1 = [\"imageSecond\"];\nconst _c2 = [\"imageLast\"];\nconst _c3 = [\"lightboxImage\"];\nconst _c4 = [\"prevImageElem\"];\nconst _c5 = [\"lightboxContainer\"];\nfunction LightboxComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.counter);\n} }\nfunction LightboxComponent_div_1_Template(rf, ctx) { if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_div_1_Template_div_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(); return ɵngcc0.ɵɵresetView(ctx_r7.closeLightbox()); });\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.closeButtonText);\n} }\nfunction LightboxComponent_div_2_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 13);\n} }\nfunction LightboxComponent_div_5_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 14);\n    ɵngcc0.ɵɵelement(1, \"div\", 13);\n    ɵngcc0.ɵɵelementEnd();\n} }\nfunction LightboxComponent_div_6_Template(rf, ctx) { if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 15);\n    ɵngcc0.ɵɵtext(1, \"Failed to load image\");\n    ɵngcc0.ɵɵelementEnd();\n} }\nlet EventService = class EventService {\r\n    constructor() {\r\n        this.emitter = new ReplaySubject(1);\r\n    }\r\n    emitChangeEvent(data) {\r\n        this.emitter.next(data);\r\n    }\r\n};\nEventService.ɵfac = function EventService_Factory(t) { return new (t || EventService)(); };\nEventService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: EventService, factory: function (t) { return EventService.ɵfac(t); } });\n\nclass Utils {\r\n    static mobileCheck() {\r\n        var check = false;\r\n        (function (a) { if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4)))\r\n            check = true; })(navigator.userAgent || navigator.vendor);\r\n        return check;\r\n    }\r\n    ;\r\n}\n\nlet LightboxCommonComponent = class LightboxCommonComponent {\r\n    constructor(eventService) {\r\n        this.eventService = eventService;\r\n        this.currentImageIndex = 0;\r\n        this.indexCurrentSlide = 1;\r\n        this.containerStyles = {\r\n            transition: '',\r\n            transform: '',\r\n            width: '',\r\n            height: '',\r\n            opacity: ''\r\n        };\r\n        this.currImageLoadingState = 'not-loaded';\r\n        this.isMobile = Utils.mobileCheck();\r\n    }\r\n    get lightboxImage() {\r\n        return this._lightboxImage;\r\n    }\r\n    get lightboxImageElement() {\r\n        if (this.lightboxImage) {\r\n            return this.lightboxImage.nativeElement;\r\n        }\r\n    }\r\n    get lightboxImageNaturalHeight() {\r\n        if (this.lightboxImageElement) {\r\n            return this.lightboxImageElement.naturalHeight;\r\n        }\r\n    }\r\n    get lightboxImageNaturalWidth() {\r\n        if (this.lightboxImageElement) {\r\n            return this.lightboxImageElement.naturalWidth;\r\n        }\r\n    }\r\n    get index() {\r\n        return this.currentImageIndex;\r\n    }\r\n    get properties() {\r\n        return this.lightboxData.properties;\r\n    }\r\n    get images() {\r\n        return this.lightboxData.images || [this.lightboxData.image];\r\n    }\r\n    get thumbnailImage() {\r\n        return this.images[this.currentImageIndex].nativeElement;\r\n    }\r\n    get thumbnailImagePosition() {\r\n        return this.thumbnailImage.getBoundingClientRect();\r\n    }\r\n    // Image size if it is larger than the window size\r\n    get virtualImageDimension() {\r\n        let height = this.lightboxImageNaturalHeight;\r\n        let width = height * this.imageAspectRatio;\r\n        const windowWidth = document.body.clientWidth;\r\n        const windowHeight = window.innerHeight;\r\n        if (this.isImageLargerWindow) {\r\n            if (height > windowHeight) {\r\n                height = windowHeight;\r\n                width = height * this.imageAspectRatio;\r\n            }\r\n            if (width > windowWidth) {\r\n                width = windowWidth;\r\n                height = width / this.imageAspectRatio;\r\n            }\r\n        }\r\n        else {\r\n            width = this.lightboxImageNaturalWidth;\r\n            height = this.lightboxImageNaturalHeight;\r\n        }\r\n        if (width === 0 || Number.parseInt(height) === 0) {\r\n            return { width: 200, height: 200 };\r\n        }\r\n        return { width, height };\r\n    }\r\n    get containerInitialPosition() {\r\n        const scale = (this.showState === 'initial-thumbnail-image') ? 1 : this.containerScale;\r\n        const top = this.thumbnailImagePosition.top;\r\n        const left = this.thumbnailImagePosition.left;\r\n        return 'matrix(' + scale + ', 0, 0, ' + scale + ',' + left + ',' + top + ')';\r\n    }\r\n    get containerFullscreenPosition() {\r\n        const left = (document.body.clientWidth - this.virtualImageDimension.width) / 2;\r\n        const top = (window.innerHeight - this.virtualImageDimension.height) / 2;\r\n        return 'translate3d(' + left + 'px, ' + top + 'px, 0)';\r\n    }\r\n    get containerScale() {\r\n        return this.thumbnailImagePosition.width / this.virtualImageDimension.width;\r\n    }\r\n    get imageAspectRatio() {\r\n        return this.thumbnailImage.naturalWidth / this.thumbnailImage.naturalHeight;\r\n    }\r\n    get isImageLargerWindow() {\r\n        const imageNaturalWidth = this.lightboxImageNaturalWidth;\r\n        const imageNaturalHeight = this.lightboxImageNaturalHeight;\r\n        const windowWidth = document.body.clientWidth;\r\n        const windowHeight = window.innerHeight;\r\n        return imageNaturalWidth > windowWidth || imageNaturalHeight > windowHeight;\r\n    }\r\n    get isFirstImage() {\r\n        if (this.properties.loop) {\r\n            return false;\r\n        }\r\n        else {\r\n            return this.index === 0;\r\n        }\r\n    }\r\n    get isLastImage() {\r\n        if (this.properties.loop) {\r\n            return false;\r\n        }\r\n        else {\r\n            return this.index === this.latestImageIndex;\r\n        }\r\n    }\r\n    get latestImageIndex() {\r\n        return this.images.length - 1;\r\n    }\r\n    get backgroundColor() {\r\n        const opacity = this.properties.backgroundOpacity;\r\n        const color = this.properties.backgroundColor;\r\n        if (color === 'black') {\r\n            return 'rgba(0, 0, 0, ' + opacity + ')';\r\n        }\r\n        else {\r\n            return 'rgba(255, 255, 255, ' + opacity + ')';\r\n        }\r\n    }\r\n    get animationDuration() {\r\n        const animationDuration = this.properties.animationDuration;\r\n        if (typeof animationDuration === \"string\") {\r\n            return Number.parseInt(animationDuration);\r\n        }\r\n        else {\r\n            return animationDuration;\r\n        }\r\n    }\r\n    get animationMode() {\r\n        if (this.currImageLoadingState === 'error') {\r\n            return 'default';\r\n        }\r\n        return this.properties.animationMode;\r\n    }\r\n    get animationTimingFunction() {\r\n        return this.properties.animationTimingFunction;\r\n    }\r\n    get closeButtonText() {\r\n        return this.properties.closeButtonText;\r\n    }\r\n    get counterSeparator() {\r\n        return this.properties.counterSeparator;\r\n    }\r\n    get counter() {\r\n        return this.currentImageIndex + 1 + this.counterSeparator + this.images.length;\r\n    }\r\n    emitState(type, state) {\r\n        if (state === 'initial-virtual-image' ||\r\n            state === 'initial-styles') {\r\n            return;\r\n        }\r\n        if (state === 'initial-default' ||\r\n            state === 'initial-thumbnail-image') {\r\n            state = 'initial';\r\n        }\r\n        this.eventService.emitChangeEvent({\r\n            type: type + ':' + state\r\n        });\r\n    }\r\n    setShowState(state) {\r\n        this.showState = state;\r\n        this.emitState('show-state', state);\r\n    }\r\n    setClosingState(state) {\r\n        this.closingState = state;\r\n        this.emitState('closing-state', state);\r\n    }\r\n    setAnimationDuration() {\r\n        this.hostStyleTransition = 'background-color ' + this.animationDuration + 'ms';\r\n        this.containerStyles.transition = 'all ' + this.animationDuration + 'ms ' + this.animationTimingFunction;\r\n    }\r\n    setBackgroundColor() {\r\n        this.hostStyleBackgroundColor = this.backgroundColor;\r\n    }\r\n    getContainerHeight() {\r\n        return this.thumbnailImagePosition.height / this.containerScale + 'px';\r\n    }\r\n    showThumbnailImage() {\r\n        this.thumbnailImage.style.opacity = '';\r\n    }\r\n    hideThumbnailImage() {\r\n        this.thumbnailImage.style.opacity = 0;\r\n    }\r\n    updateThumbnailPosition() {\r\n        this.containerStyles.transform = this.containerInitialPosition;\r\n    }\r\n};\nLightboxCommonComponent.ɵfac = function LightboxCommonComponent_Factory(t) { return new (t || LightboxCommonComponent)(ɵngcc0.ɵɵdirectiveInject(EventService)); };\nLightboxCommonComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: LightboxCommonComponent, selectors: [[\"lightbox-common\"]], viewQuery: function LightboxCommonComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 7);\n        ɵngcc0.ɵɵviewQuery(_c1, 7);\n        ɵngcc0.ɵɵviewQuery(_c2, 7);\n        ɵngcc0.ɵɵviewQuery(_c3, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageFirst = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageSecond = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._imageLast = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._lightboxImage = _t.first);\n    } }, hostVars: 4, hostBindings: function LightboxCommonComponent_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"transition\", ctx.hostStyleTransition)(\"background-color\", ctx.hostStyleBackgroundColor);\n    } }, inputs: { lightboxData: \"lightboxData\" }, decls: 0, vars: 0, template: function LightboxCommonComponent_Template(rf, ctx) { }, encapsulation: 2 });\r\nLightboxCommonComponent.ctorParameters = () => [\r\n    { type: EventService }\r\n];\r\n__decorate([\r\n    Input()\r\n], LightboxCommonComponent.prototype, \"lightboxData\", void 0);\r\n__decorate([\r\n    HostBinding('style.backgroundColor')\r\n], LightboxCommonComponent.prototype, \"hostStyleBackgroundColor\", void 0);\r\n__decorate([\r\n    HostBinding('style.transition')\r\n], LightboxCommonComponent.prototype, \"hostStyleTransition\", void 0);\r\n__decorate([\r\n    ViewChild('imageFirst', { static: true })\r\n], LightboxCommonComponent.prototype, \"_imageFirst\", void 0);\r\n__decorate([\r\n    ViewChild('imageSecond', { static: true })\r\n], LightboxCommonComponent.prototype, \"_imageSecond\", void 0);\r\n__decorate([\r\n    ViewChild('imageLast', { static: true })\r\n], LightboxCommonComponent.prototype, \"_imageLast\", void 0);\r\n__decorate([\r\n    ViewChild('lightboxImage', { static: true })\r\n], LightboxCommonComponent.prototype, \"_lightboxImage\", void 0);\n\nlet LightboxComponent = class LightboxComponent extends LightboxCommonComponent {\r\n    constructor(elementRef, ref, eventService) {\r\n        super(eventService);\r\n        this.elementRef = elementRef;\r\n        this.ref = ref;\r\n        this.eventService = eventService;\r\n        this.spinnerHeight = 30;\r\n        this.minTimeout = 30;\r\n        this.preloaderTimeout = 100;\r\n        this.spinnerStyles = {\r\n            transform: ''\r\n        };\r\n        this.configThumbnailPreloader = true;\r\n        this.events = new EventEmitter();\r\n        this.hostShown = false;\r\n        this.hideControls = false;\r\n    }\r\n    get simpleMode() {\r\n        return this.properties.simpleMode;\r\n    }\r\n    get hostLightTheme() {\r\n        return this.properties.backgroundColor === 'white';\r\n    }\r\n    get currImagePath() {\r\n        let image = this.images[this.index];\r\n        let path;\r\n        if (!image) {\r\n            return false;\r\n        }\r\n        if (image.fullImage && image.fullImage.path) {\r\n            path = image.fullImage.path;\r\n        }\r\n        else if (image.thumbnailImage && image.thumbnailImage.path) {\r\n            path = image.thumbnailImage.path;\r\n        }\r\n        else if (image.path) {\r\n            path = image.path;\r\n        }\r\n        return path;\r\n    }\r\n    get prevImagePath() {\r\n        return this.images[this.prevIndex];\r\n    }\r\n    set prevImagePath(value) {\r\n        this.images[this.prevIndex] = value;\r\n    }\r\n    get isHiddenPrevArrow() {\r\n        return this.isFirstImage && !this.properties.loop || this.isZoomIn;\r\n    }\r\n    get isHiddenNextArrow() {\r\n        return this.isLastImage && !this.properties.loop || this.isZoomIn;\r\n    }\r\n    get isPreloader() {\r\n        return this.animationMode === 'zoom-preloader' &&\r\n            this.showState != 'animation-end' &&\r\n            this.currImageLoadingState === 'loading';\r\n    }\r\n    get imageOrientation() {\r\n        if (this.thumbnailImage.naturalWidth > this.thumbnailImage.naturalHeight) {\r\n            return 'horizontal';\r\n        }\r\n        else {\r\n            return 'vertical';\r\n        }\r\n    }\r\n    scrolling() {\r\n        if (this.showState === 'initial-thumbnail-image' ||\r\n            this.showState === 'initial-virtual-image' ||\r\n            this.closingState === 'animation') {\r\n            this.updateThumbnailPosition();\r\n        }\r\n    }\r\n    onKeyDown(event) {\r\n        switch (event.key) {\r\n            case 'ArrowLeft':\r\n                this.prev();\r\n                break;\r\n            case 'ArrowRight':\r\n                this.next();\r\n                break;\r\n            case 'Escape':\r\n                this.closeLightbox();\r\n                break;\r\n        }\r\n    }\r\n    onMouseEnter(event) {\r\n        this.hideControls = false;\r\n    }\r\n    transitionEnd(event) {\r\n        if (event.propertyName === \"transform\" && this.hostAnimation) {\r\n            this.hostAnimation = false;\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this.currentImageIndex = this.properties.index;\r\n        this.initialLightbox();\r\n    }\r\n    ngAfterViewInit() {\r\n        setTimeout(() => {\r\n            if (this.currImageLoadingState === 'not-loaded') {\r\n                this.currImageLoadingState = 'loading';\r\n            }\r\n        }, this.preloaderTimeout);\r\n        // Mode: default\r\n        if (this.animationMode === 'default') {\r\n            setTimeout(() => {\r\n                this.showLightboxAnimation();\r\n            }, this.minTimeout);\r\n        }\r\n    }\r\n    onImageLoaded() {\r\n        // When opening lightbox\r\n        if (this.animationMode === 'zoom-preloader' &&\r\n            this.showState === 'initial-thumbnail-image') {\r\n            this.initialLightboxVirtualImage();\r\n            setTimeout(() => {\r\n                this.currImageLoadingState = 'uploaded';\r\n                this.showLightboxAnimation();\r\n                if (this.properties.hideThumbnail) {\r\n                    this.hideThumbnailImage();\r\n                }\r\n            }, this.minTimeout);\r\n        }\r\n        // When opening next / previous image\r\n        if (this.showState === 'animation-end') {\r\n            this.currImageLoadingState = 'uploaded';\r\n            if (this.properties.hideThumbnail) {\r\n                this.hideThumbnailImage();\r\n            }\r\n        }\r\n        this.ref.detectChanges();\r\n    }\r\n    onImageError(event) {\r\n        this.currImageLoadingState = 'error';\r\n        this.initialLightboxDefault();\r\n        setTimeout(() => {\r\n            this.showLightboxAnimation();\r\n        }, this.minTimeout);\r\n    }\r\n    onContainerClick(event) {\r\n        if (event.target === this.lightboxContainerElem.nativeElement || this.simpleMode) {\r\n            this.closeLightbox();\r\n        }\r\n    }\r\n    initialLightbox() {\r\n        this.setMaxDimensions();\r\n        this.setAnimationDuration();\r\n        switch (this.animationMode) {\r\n            case 'zoom-preloader':\r\n                this.initialLightboxThumbnailImage();\r\n                break;\r\n            case 'default':\r\n                this.initialLightboxDefault();\r\n                break;\r\n        }\r\n    }\r\n    initialLightboxDefault() {\r\n        this.showState = 'initial-default';\r\n        this.containerStyles = {\r\n            transform: 'translate3d(0, 0, 0)',\r\n            height: '100%',\r\n            width: '100%',\r\n            opacity: '0'\r\n        };\r\n        // next step: AfterViewInit\r\n    }\r\n    initialLightboxVirtualImage() {\r\n        this.setShowState('initial-virtual-image');\r\n        this.containerStyles = {\r\n            transform: this.containerInitialPosition,\r\n            height: this.virtualImageDimension.height + 'px',\r\n            width: this.virtualImageDimension.width + 'px'\r\n        };\r\n        // next step: onImageLoaded() -> showLightboxAnimation()\r\n    }\r\n    initialLightboxThumbnailImage() {\r\n        this.setShowState('initial-thumbnail-image');\r\n        this.containerStyles = {\r\n            transform: this.containerInitialPosition,\r\n            height: this.thumbnailImagePosition.height + 'px',\r\n            width: this.thumbnailImagePosition.width + 'px'\r\n        };\r\n        // next step: onImageLoaded()\r\n    }\r\n    showLightboxAnimation() {\r\n        this.hostAnimation = true;\r\n        this.setShowState('animation');\r\n        this.hostShown = true;\r\n        this.setBackgroundColor();\r\n        this.setAnimationDuration();\r\n        // Mode: zoom preloader\r\n        if (this.animationMode === 'zoom-preloader' &&\r\n            this.currImageLoadingState !== 'error') {\r\n            this.containerStyles.transform = this.containerFullscreenPosition;\r\n        }\r\n        // Mode: default\r\n        if (this.animationMode === 'default') {\r\n            this.containerStyles.opacity = '1';\r\n        }\r\n        // next step: handleLightboxTransitionEnd\r\n    }\r\n    showLightboxAnimationEnd() {\r\n        this.setShowState('animation-end');\r\n        this.containerStyles = {\r\n            transform: 'translate3d(0, 0, 0)',\r\n            height: '100%',\r\n            width: '100%',\r\n        };\r\n    }\r\n    closeLightbox() {\r\n        this.setClosingState('initial');\r\n        this.hostShown = false;\r\n        this.closeLightboxInitial();\r\n    }\r\n    closeLightboxInitial() {\r\n        this.setClosingState('initial-styles');\r\n        // Mode: zoom preloader\r\n        if (this.animationMode === 'zoom-preloader') {\r\n            this.containerStyles = {\r\n                transform: this.containerFullscreenPosition,\r\n                height: this.virtualImageDimension.height + 'px',\r\n                width: this.virtualImageDimension.width + 'px',\r\n            };\r\n        }\r\n        // Mode: default\r\n        if (this.animationMode === 'default') {\r\n            this.containerStyles.opacity = '1';\r\n        }\r\n        setTimeout(() => {\r\n            this.closeLightboxAnimation();\r\n        }, this.minTimeout);\r\n    }\r\n    closeLightboxAnimation() {\r\n        this.setClosingState('animation');\r\n        // Mode: zoom preloader\r\n        if (this.animationMode === 'zoom-preloader') {\r\n            this.hostAnimation = true;\r\n            this.containerStyles = {\r\n                transform: this.containerInitialPosition,\r\n                height: this.getContainerHeight(),\r\n                width: this.getContainerWidth(),\r\n            };\r\n            this.hostStyleBackgroundColor = '';\r\n        }\r\n        // Mode: default\r\n        if (this.animationMode === 'default') {\r\n            this.hostAnimation = true;\r\n            this.containerStyles.opacity = '0';\r\n            this.hostStyleBackgroundColor = '';\r\n        }\r\n        this.setAnimationDuration();\r\n        // next step: handleLightboxTransitionEnd\r\n        if (this.animationDuration === 0) { // in the future, change to a type conversion getter\r\n            this.closeLightboxAnimationEnd();\r\n        }\r\n    }\r\n    closeLightboxAnimationEnd() {\r\n        this.setClosingState('animation-end');\r\n        this.events.emit({ type: 'close' });\r\n        // Mode: zoom preloader\r\n        if (this.animationMode === 'zoom-preloader') {\r\n            this.showThumbnailImage();\r\n        }\r\n    }\r\n    /*\r\n     * Transition End\r\n     */\r\n    handleLightboxTransitionEnd(event) {\r\n        if (this.showState === 'animation') {\r\n            this.showLightboxAnimationEnd();\r\n        }\r\n        // Last close step\r\n        if (this.closingState === 'animation') {\r\n            this.closeLightboxAnimationEnd();\r\n        }\r\n    }\r\n    next() {\r\n        if (this.animationMode === 'zoom-preloader') {\r\n            this.showThumbnailImage();\r\n        }\r\n        if (this.isLastImage) {\r\n            if (this.properties.loop) {\r\n                this.currentImageIndex = 0;\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            this.currentImageIndex++;\r\n            this.currImageLoadingState = 'loading';\r\n        }\r\n        setTimeout(() => {\r\n            if (this.currImageLoadingState !== 'uploaded') {\r\n                this.currImageLoadingState = 'loading';\r\n            }\r\n        }, this.preloaderTimeout);\r\n    }\r\n    prev() {\r\n        if (this.animationMode === 'zoom-preloader') {\r\n            this.showThumbnailImage();\r\n        }\r\n        if (this.isFirstImage) {\r\n            if (this.properties.loop) {\r\n                this.currentImageIndex = this.latestImageIndex;\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            this.currentImageIndex--;\r\n            this.currImageLoadingState = 'loading';\r\n        }\r\n        setTimeout(() => {\r\n            if (this.currImageLoadingState !== 'uploaded') {\r\n                this.currImageLoadingState = 'loading';\r\n            }\r\n        }, this.preloaderTimeout);\r\n    }\r\n    setMaxDimensions() {\r\n        this.lightboxImage.nativeElement.style.maxHeight = 'calc(' + this.properties.imageMaxHeight + ')';\r\n        this.lightboxImage.nativeElement.style.maxWidth = this.properties.imageMaxWidth;\r\n    }\r\n    handlePinchZoomEvents(event) {\r\n        if (event.type === \"zoom-in\") {\r\n            this.isZoomIn = true;\r\n        }\r\n        if (event.type === \"zoom-out\") {\r\n            this.isZoomIn = false;\r\n        }\r\n    }\r\n    getContainerWidth() {\r\n        return this.thumbnailImagePosition.width / this.containerScale + 'px';\r\n    }\r\n};\nLightboxComponent.ɵfac = function LightboxComponent_Factory(t) { return new (t || LightboxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(EventService)); };\nLightboxComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: LightboxComponent, selectors: [[\"crystal-lightbox\"]], viewQuery: function LightboxComponent_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c4, 7);\n        ɵngcc0.ɵɵviewQuery(_c5, 7);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prevImageElem = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.lightboxContainerElem = _t.first);\n    } }, hostVars: 12, hostBindings: function LightboxComponent_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"scroll\", function LightboxComponent_scroll_HostBindingHandler() { return ctx.scrolling(); }, false, ɵngcc0.ɵɵresolveWindow)(\"keydown\", function LightboxComponent_keydown_HostBindingHandler($event) { return ctx.onKeyDown($event); }, false, ɵngcc0.ɵɵresolveWindow)(\"mouseenter\", function LightboxComponent_mouseenter_HostBindingHandler($event) { return ctx.onMouseEnter($event); })(\"transitionend\", function LightboxComponent_transitionend_HostBindingHandler($event) { return ctx.transitionEnd($event); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"background-color\", ctx.hostStyleBackgroundColor);\n        ɵngcc0.ɵɵclassProp(\"lightbox-shown\", ctx.hostShown)(\"lightbox-hide-controls\", ctx.hideControls)(\"lightbox-simple-mode\", ctx.simpleMode)(\"lightbox-light\", ctx.hostLightTheme)(\"lightbox-animation\", ctx.hostAnimation);\n    } }, features: [ɵngcc0.ɵɵInheritDefinitionFeature], decls: 11, vars: 11, consts: [[\"class\", \"lightbox-counter\", 4, \"ngIf\"], [\"class\", \"lightbox-close\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"lightbox-spinner\", 4, \"ngIf\"], [1, \"lightbox-container\", 3, \"ngStyle\", \"transitionend\", \"click\"], [\"lightboxContainer\", \"\"], [\"class\", \"lightbox-preloader\", 4, \"ngIf\"], [\"class\", \"lightbox-error\", 4, \"ngIf\"], [1, \"lightbox-curr-image\", 3, \"src\", \"load\", \"error\"], [\"lightboxImage\", \"\"], [1, \"lightbox-prev\", 3, \"hidden\", \"click\"], [1, \"lightbox-next\", 3, \"hidden\", \"click\"], [1, \"lightbox-counter\"], [1, \"lightbox-close\", 3, \"click\"], [1, \"lightbox-spinner\"], [1, \"lightbox-preloader\"], [1, \"lightbox-error\"]], template: function LightboxComponent_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, LightboxComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, LightboxComponent_div_1_Template, 2, 1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, LightboxComponent_div_2_Template, 1, 0, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3, 4);\n        ɵngcc0.ɵɵlistener(\"transitionend\", function LightboxComponent_Template_div_transitionend_3_listener($event) { return ctx.handleLightboxTransitionEnd($event); })(\"click\", function LightboxComponent_Template_div_click_3_listener($event) { return ctx.onContainerClick($event); });\n        ɵngcc0.ɵɵtemplate(5, LightboxComponent_div_5_Template, 2, 0, \"div\", 5);\n        ɵngcc0.ɵɵtemplate(6, LightboxComponent_div_6_Template, 2, 0, \"div\", 6);\n        ɵngcc0.ɵɵelementStart(7, \"img\", 7, 8);\n        ɵngcc0.ɵɵlistener(\"load\", function LightboxComponent_Template_img_load_7_listener() { return ctx.onImageLoaded(); })(\"error\", function LightboxComponent_Template_img_error_7_listener($event) { return ctx.onImageError($event); });\n        ɵngcc0.ɵɵelementEnd()();\n        ɵngcc0.ɵɵelementStart(9, \"div\", 9);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_9_listener() { return ctx.prev(); });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(10, \"div\", 10);\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxComponent_Template_div_click_10_listener() { return ctx.next(); });\n        ɵngcc0.ɵɵelementEnd();\n    } if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.properties.counter && ctx.images.length > 1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.simpleMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.currImageLoadingState === \"loading\" && ctx.showState === \"animation-end\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.containerStyles);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isPreloader);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.currImageLoadingState === \"error\" && !ctx.closingState);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"lightbox-show\", ctx.currImageLoadingState === \"uploaded\");\n        ɵngcc0.ɵɵproperty(\"src\", ctx.currImagePath, ɵngcc0.ɵɵsanitizeUrl);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"hidden\", ctx.isHiddenPrevArrow);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"hidden\", ctx.isHiddenNextArrow);\n    } }, dependencies: [ɵngcc1.NgIf, ɵngcc1.NgStyle], styles: [\".lightbox-spinner[_ngcontent-%COMP%], .lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite _ngcontent-%COMP%_lightbox-load;animation:1.5s ease-in-out infinite _ngcontent-%COMP%_lightbox-load}.lightbox-spinner[_ngcontent-%COMP%]{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.lightbox-spinner[_ngcontent-%COMP%]:after, .lightbox-spinner[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0}.lightbox-spinner[_ngcontent-%COMP%]:before{left:-32px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.lightbox-spinner[_ngcontent-%COMP%]:after{left:32px}@-webkit-keyframes _ngcontent-%COMP%_lightbox-load{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes _ngcontent-%COMP%_lightbox-load{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}.lightbox-shown[_nghost-%COMP%]{opacity:1}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:.5;transition-delay:.1s}.lightbox-shown[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]:hover, .lightbox-shown[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]:hover{opacity:1;transition-delay:0}.lightbox-shown[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{opacity:1}.lightbox-hide-controls[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], .lightbox-hide-controls[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0}.lightbox-simple-mode[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{cursor:zoom-out}[_nghost-%COMP%]:not(.lightbox-animation)   .lightbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;top:0;left:0;height:100%}.lightbox-light[_nghost-%COMP%]{color:#000;text-shadow:none}[_nghost-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;text-shadow:0 0 1px rgba(0,0,0,.65);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10000}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{opacity:1;max-width:100%;max-height:100%}[_nghost-%COMP%]   img.lightbox-curr-image.lightbox-show[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   img.lightbox-curr-image[_ngcontent-%COMP%]{opacity:0;z-index:10}[_nghost-%COMP%]   .lightbox-container.lightbox-hide[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .lightbox-container[_ngcontent-%COMP%]{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform-origin:top left}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute}[_nghost-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{position:absolute;top:51%;left:50%;margin-top:-15px;margin-left:-5px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]{margin-top:-9px;margin-left:-3px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{width:6px;height:6px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:before{left:-21px}[_nghost-%COMP%]   .lightbox-preloader[_ngcontent-%COMP%]   .lightbox-spinner[_ngcontent-%COMP%]:after{left:21px}[_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%]{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;z-index:30}[_nghost-%COMP%]   .lightbox-description[_ngcontent-%COMP%]{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}[_nghost-%COMP%]   .lightbox-error[_ngcontent-%COMP%]{color:rgba(255,255,255,.75);font-size:19px}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{width:100px;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}[_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}[_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%]{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}[_nghost-%COMP%]   .lightbox-close[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-counter[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-next[_ngcontent-%COMP%], [_nghost-%COMP%]   .lightbox-prev[_ngcontent-%COMP%]{opacity:0;transition:opacity 150ms cubic-bezier(.475,.105,.445,.945)}\"] });\r\nLightboxComponent.ctorParameters = () => [\r\n    { type: ElementRef },\r\n    { type: ChangeDetectorRef },\r\n    { type: EventService }\r\n];\r\n__decorate([\r\n    HostBinding('class.lightbox-shown')\r\n], LightboxComponent.prototype, \"hostShown\", void 0);\r\n__decorate([\r\n    HostBinding('class.lightbox-hide-controls')\r\n], LightboxComponent.prototype, \"hideControls\", void 0);\r\n__decorate([\r\n    HostBinding('class.lightbox-animation')\r\n], LightboxComponent.prototype, \"hostAnimation\", void 0);\r\n__decorate([\r\n    HostBinding('class.lightbox-simple-mode')\r\n], LightboxComponent.prototype, \"simpleMode\", null);\r\n__decorate([\r\n    HostBinding('class.lightbox-light')\r\n], LightboxComponent.prototype, \"hostLightTheme\", null);\r\n__decorate([\r\n    HostBinding('style.backgroundColor')\r\n], LightboxComponent.prototype, \"hostStyleBackgroundColor\", void 0);\r\n__decorate([\r\n    ViewChild('prevImageElem', { static: true })\r\n], LightboxComponent.prototype, \"prevImageElem\", void 0);\r\n__decorate([\r\n    ViewChild('lightboxContainer', { static: true })\r\n], LightboxComponent.prototype, \"lightboxContainerElem\", void 0);\r\n__decorate([\r\n    HostListener('window:scroll')\r\n], LightboxComponent.prototype, \"scrolling\", null);\r\n__decorate([\r\n    HostListener('window:keydown', ['$event'])\r\n], LightboxComponent.prototype, \"onKeyDown\", null);\r\n__decorate([\r\n    HostListener(\"mouseenter\", ['$event'])\r\n], LightboxComponent.prototype, \"onMouseEnter\", null);\r\n__decorate([\r\n    HostListener('transitionend', ['$event'])\r\n], LightboxComponent.prototype, \"transitionEnd\", null);\n\nconst DefaultProperties = {\r\n    loop: false,\r\n    index: 0,\r\n    counter: false,\r\n    imageMaxHeight: \"100%\",\r\n    imageMaxWidth: \"100%\",\r\n    animationDuration: 350,\r\n    animationMode: 'zoom-preloader',\r\n    animationTimingFunction: 'cubic-bezier(0.475, 0.105, 0.445, 0.945)',\r\n    closeButtonText: 'Close',\r\n    counterSeparator: '/',\r\n    disable: false,\r\n    simpleMode: false,\r\n    backgroundColor: 'black',\r\n    backgroundOpacity: 1,\r\n    hideThumbnail: true,\r\n    gestureEnable: false\r\n};\n\nlet CrystalLightbox = class CrystalLightbox {\r\n    constructor(componentFactoryResolver, appRef, injector) {\r\n        this.componentFactoryResolver = componentFactoryResolver;\r\n        this.appRef = appRef;\r\n        this.injector = injector;\r\n    }\r\n    appendComponentToBody(component, lightboxData) {\r\n        const componentRef = this.componentFactoryResolver\r\n            .resolveComponentFactory(component)\r\n            .create(this.injector);\r\n        componentRef.instance.lightboxData = lightboxData;\r\n        this.appRef.attachView(componentRef.hostView);\r\n        const domElem = componentRef.hostView.rootNodes[0];\r\n        // Add to body\r\n        document.body.appendChild(domElem);\r\n        componentRef.instance.events.subscribe((event) => {\r\n            if (event.type === 'close') {\r\n                this.appRef.detachView(componentRef.hostView);\r\n                componentRef.destroy();\r\n            }\r\n        });\r\n    }\r\n    open(lightboxData) {\r\n        lightboxData.properties = this.applyPropertieDefaults(DefaultProperties, lightboxData.properties);\r\n        let component = this.getLightboxComponent();\r\n        this.appendComponentToBody(component, lightboxData);\r\n    }\r\n    getLightboxComponent() {\r\n        return LightboxComponent;\r\n    }\r\n    applyPropertieDefaults(defaultProperties, properties) {\r\n        if (!properties) {\r\n            properties = {};\r\n        }\r\n        if (!properties.index) {\r\n            properties.index = 0;\r\n        }\r\n        this._defaultProperties = Object.assign({}, defaultProperties);\r\n        return Object.assign(this._defaultProperties, properties);\r\n    }\r\n};\nCrystalLightbox.ɵfac = function CrystalLightbox_Factory(t) { return new (t || CrystalLightbox)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.ApplicationRef), ɵngcc0.ɵɵinject(ɵngcc0.Injector)); };\nCrystalLightbox.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: CrystalLightbox, factory: function (t) { return CrystalLightbox.ɵfac(t); } });\r\nCrystalLightbox.ctorParameters = () => [\r\n    { type: ComponentFactoryResolver },\r\n    { type: ApplicationRef },\r\n    { type: Injector }\r\n];\n\nlet LightboxDirective = class LightboxDirective {\r\n    constructor(lightbox, eventService, elementRef) {\r\n        this.lightbox = lightbox;\r\n        this.eventService = eventService;\r\n        this.elementRef = elementRef;\r\n        this.properties = {};\r\n        this.events = new EventEmitter();\r\n        this.hostLightboxGroup = true;\r\n        this.globalEventsSubscription = this.eventService.emitter.subscribe((event) => {\r\n            this.handleGlobalEvents(event);\r\n        });\r\n    }\r\n    get hostSimpleMode() {\r\n        return this.simpleMode;\r\n    }\r\n    get isGroupImage() {\r\n        return this.elementRef.nativeElement.closest(\".lightbox-group\");\r\n    }\r\n    onClick(event) {\r\n        if (this.disable) {\r\n            return;\r\n        }\r\n        if (this.isGroupImage) {\r\n            this.eventService.emitChangeEvent({\r\n                type: 'thumbnail:click',\r\n                elementRef: this.elementRef,\r\n                properties: this.properties\r\n            });\r\n        }\r\n        else {\r\n            this.image = this.getImage();\r\n            this.lightbox.open({\r\n                images: [this.image],\r\n                properties: this.properties,\r\n                index: 0\r\n            });\r\n        }\r\n    }\r\n    ngOnChanges(changes) {\r\n        this.properties = Object.assign({}, this.properties, this.getProperties(changes));\r\n    }\r\n    handleGlobalEvents(event) {\r\n        this.events.emit(event);\r\n    }\r\n    getImage() {\r\n        let image = {};\r\n        const nativeElement = this.elementRef.nativeElement;\r\n        if (this.fullImage) {\r\n            image.fullImage = this.fullImage;\r\n        }\r\n        image.thumbnailImage = {\r\n            path: nativeElement.src,\r\n            height: nativeElement.naturalHeight,\r\n            width: nativeElement.naturalWidth\r\n        };\r\n        image.nativeElement = nativeElement;\r\n        return image;\r\n    }\r\n    ;\r\n    getProperties(changes) {\r\n        let properties = {};\r\n        for (var prop in changes) {\r\n            if (prop !== 'fullImage') {\r\n                properties[prop] = changes[prop].currentValue;\r\n            }\r\n        }\r\n        return properties;\r\n    }\r\n};\nLightboxDirective.ɵfac = function LightboxDirective_Factory(t) { return new (t || LightboxDirective)(ɵngcc0.ɵɵdirectiveInject(CrystalLightbox), ɵngcc0.ɵɵdirectiveInject(EventService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nLightboxDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: LightboxDirective, selectors: [[\"\", \"lightbox\", \"\"]], hostVars: 4, hostBindings: function LightboxDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function LightboxDirective_click_HostBindingHandler($event) { return ctx.onClick($event); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"lightbox-single\", ctx.hostLightboxGroup)(\"lightbox-simple-mode\", ctx.hostSimpleMode);\n    } }, inputs: { properties: \"properties\", fullImage: \"fullImage\", loop: \"loop\", backgroundOpacity: \"backgroundOpacity\", counter: \"counter\", imageMaxHeight: \"imageMaxHeight\", imageMaxWidth: \"imageMaxWidth\", animationDuration: \"animationDuration\", animationMode: \"animationMode\", animationTimingFunction: \"animationTimingFunction\", closeButtonText: \"closeButtonText\", counterSeparator: \"counterSeparator\", disable: \"disable\", simpleMode: \"simpleMode\", backgroundColor: \"backgroundColor\", hideThumbnail: \"hideThumbnail\", gestureEnable: \"gestureEnable\" }, outputs: { events: \"events\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature] });\r\nLightboxDirective.ctorParameters = () => [\r\n    { type: CrystalLightbox },\r\n    { type: EventService },\r\n    { type: ElementRef }\r\n];\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"fullImage\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"properties\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"loop\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"backgroundOpacity\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"counter\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"imageMaxHeight\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"imageMaxWidth\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"animationDuration\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"animationMode\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"animationTimingFunction\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"closeButtonText\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"counterSeparator\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"disable\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"simpleMode\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"backgroundColor\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"hideThumbnail\", void 0);\r\n__decorate([\r\n    Input()\r\n], LightboxDirective.prototype, \"gestureEnable\", void 0);\r\n__decorate([\r\n    Output()\r\n], LightboxDirective.prototype, \"events\", void 0);\r\n__decorate([\r\n    HostBinding('class.lightbox-single')\r\n], LightboxDirective.prototype, \"hostLightboxGroup\", void 0);\r\n__decorate([\r\n    HostBinding('class.lightbox-simple-mode')\r\n], LightboxDirective.prototype, \"hostSimpleMode\", null);\r\n__decorate([\r\n    HostListener('click', ['$event'])\r\n], LightboxDirective.prototype, \"onClick\", null);\n\nlet LightboxGroupDirective = class LightboxGroupDirective {\r\n    constructor(eventService, lightbox) {\r\n        this.eventService = eventService;\r\n        this.lightbox = lightbox;\r\n        this.thumbnailImages = [];\r\n        this.images = [];\r\n        this.properties = {};\r\n        this.hostLightboxGroup = true;\r\n        this.globalEventsSubscription = this.eventService.emitter.subscribe((event) => {\r\n            this.handleGlobalEvents(event);\r\n        });\r\n    }\r\n    get lightboxDirectiveList() {\r\n        if (this._lightboxDirectiveList) {\r\n            return this._lightboxDirectiveList.toArray();\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    handleGlobalEvents(event) {\r\n        if (event.type === 'thumbnail:click') {\r\n            this.thumbnailImageElement = event.elementRef.nativeElement;\r\n            this.thumbnailImages = this.getThumbnailImages();\r\n            this.thumbnailImageIndex = this.getThumbnailImageIndex(this.thumbnailImageElement);\r\n            if (this.thumbnailImageIndex == undefined) {\r\n                return;\r\n            }\r\n            this.thumbnailLightboxDirective = this.getThumbnailLightboxDirective(this.thumbnailImageIndex);\r\n            this.images = this.getImages();\r\n            this.properties = event.properties;\r\n            this.properties.index = this.thumbnailImageIndex;\r\n            this.lightbox.open({\r\n                images: this.images,\r\n                //index: this.thumbnailImageIndex,\r\n                properties: this.properties\r\n            });\r\n        }\r\n    }\r\n    getThumbnailImageIndex(element) {\r\n        const images = this.thumbnailImages;\r\n        for (var i = 0; i < images.length; i++) {\r\n            if (element === images[i]) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n    getThumbnailLightboxDirective(index) {\r\n        return this.lightboxDirectiveList[index];\r\n    }\r\n    getThumbnailImages() {\r\n        let thumbnailImages = [];\r\n        this.lightboxDirectiveList.forEach(el => {\r\n            thumbnailImages.push(el['elementRef'].nativeElement);\r\n        });\r\n        return thumbnailImages;\r\n    }\r\n    getImages() {\r\n        let images = [];\r\n        this.lightboxDirectiveList.forEach(el => {\r\n            let image = {};\r\n            const nativeElement = el['elementRef'].nativeElement;\r\n            if (el.fullImage) {\r\n                image.fullImage = el.fullImage;\r\n            }\r\n            image.thumbnailImage = {\r\n                path: nativeElement.src,\r\n                height: nativeElement.naturalHeight,\r\n                width: nativeElement.naturalWidth\r\n            };\r\n            image.nativeElement = nativeElement;\r\n            images.push(image);\r\n        });\r\n        return images;\r\n    }\r\n};\nLightboxGroupDirective.ɵfac = function LightboxGroupDirective_Factory(t) { return new (t || LightboxGroupDirective)(ɵngcc0.ɵɵdirectiveInject(EventService), ɵngcc0.ɵɵdirectiveInject(CrystalLightbox)); };\nLightboxGroupDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: LightboxGroupDirective, selectors: [[\"\", \"lightbox-group\", \"\"]], contentQueries: function LightboxGroupDirective_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, LightboxDirective, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._lightboxDirectiveList = _t);\n    } }, hostVars: 2, hostBindings: function LightboxGroupDirective_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"lightbox-group\", ctx.hostLightboxGroup);\n    } } });\r\nLightboxGroupDirective.ctorParameters = () => [\r\n    { type: EventService },\r\n    { type: CrystalLightbox }\r\n];\r\n__decorate([\r\n    HostBinding('class.lightbox-group')\r\n], LightboxGroupDirective.prototype, \"hostLightboxGroup\", void 0);\r\n__decorate([\r\n    ContentChildren(LightboxDirective, { descendants: true })\r\n], LightboxGroupDirective.prototype, \"_lightboxDirectiveList\", void 0);\n\nlet CrystalLightboxModule = class CrystalLightboxModule {\r\n};\nCrystalLightboxModule.ɵfac = function CrystalLightboxModule_Factory(t) { return new (t || CrystalLightboxModule)(); };\nCrystalLightboxModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: CrystalLightboxModule });\nCrystalLightboxModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ providers: [\n        CrystalLightbox,\n        EventService\n    ], imports: [CommonModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(EventService, [{\n        type: Injectable\n    }], function () { return []; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxCommonComponent, [{\n        type: Component,\n        args: [{\n                selector: 'lightbox-common',\n                template: ''\n            }]\n    }], function () { return [{ type: EventService }]; }, { hostStyleTransition: [{\n            type: HostBinding,\n            args: ['style.transition']\n        }], hostStyleBackgroundColor: [{\n            type: HostBinding,\n            args: ['style.backgroundColor']\n        }], lightboxData: [{\n            type: Input\n        }], _imageFirst: [{\n            type: ViewChild,\n            args: ['imageFirst', { static: true }]\n        }], _imageSecond: [{\n            type: ViewChild,\n            args: ['imageSecond', { static: true }]\n        }], _imageLast: [{\n            type: ViewChild,\n            args: ['imageLast', { static: true }]\n        }], _lightboxImage: [{\n            type: ViewChild,\n            args: ['lightboxImage', { static: true }]\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxComponent, [{\n        type: Component,\n        args: [{ selector: 'crystal-lightbox', template: \"<div class=\\\"lightbox-counter\\\" *ngIf=\\\"properties.counter && images.length > 1\\\">{{counter}}</div>\\n<div class=\\\"lightbox-close\\\" *ngIf=\\\"!simpleMode\\\" (click)=\\\"closeLightbox()\\\">{{closeButtonText}}</div>\\n<div class=\\\"lightbox-spinner\\\" \\n\\t*ngIf=\\\"currImageLoadingState === 'loading' && showState === 'animation-end'\\\"></div>\\n<div class=\\\"lightbox-container\\\" \\n\\t#lightboxContainer\\n\\t[ngStyle]=\\\"containerStyles\\\"\\n\\t(transitionend)=\\\"handleLightboxTransitionEnd($event)\\\"\\n\\t(click)=\\\"onContainerClick($event)\\\">\\n\\n\\t<div class=\\\"lightbox-preloader\\\" *ngIf=\\\"isPreloader\\\">\\n\\t\\t<div class=\\\"lightbox-spinner\\\"></div>\\n\\t</div>\\n\\n\\t<div class=\\\"lightbox-error\\\" *ngIf=\\\"currImageLoadingState === 'error' && !closingState\\\">Failed to load image</div>\\n\\n\\t<img class=\\\"lightbox-curr-image\\\" \\n\\t\\t#lightboxImage\\n\\t\\t[src]=\\\"currImagePath\\\" \\n\\t\\t[class.lightbox-show]=\\\"currImageLoadingState === 'uploaded'\\\" \\n\\t\\t(load)=\\\"onImageLoaded()\\\"\\n\\t\\t(error)=\\\"onImageError($event)\\\" />\\n</div>\\n\\n<div class=\\\"lightbox-prev\\\" [hidden]=\\\"isHiddenPrevArrow\\\" (click)=\\\"prev()\\\"></div>\\n<div class=\\\"lightbox-next\\\" [hidden]=\\\"isHiddenNextArrow\\\" (click)=\\\"next()\\\"></div>\", styles: [\".lightbox-spinner,.lightbox-spinner:after,.lightbox-spinner:before{border-radius:50%;width:10px;height:10px;-webkit-animation:1.5s ease-in-out infinite lightbox-load;animation:1.5s ease-in-out infinite lightbox-load}.lightbox-spinner{color:#fff;font-size:10px;margin:0 auto 20px;position:relative;text-indent:-9999em;transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s}.lightbox-spinner:after,.lightbox-spinner:before{content:\\\"\\\";position:absolute;top:0}.lightbox-spinner:before{left:-32px;-webkit-animation-delay:-.32s;animation-delay:-.32s}.lightbox-spinner:after{left:32px}@-webkit-keyframes lightbox-load{0%,100%,80%{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}@keyframes lightbox-load{0%,100%,80%{box-shadow:0 10px 0 -1.3em}40%{box-shadow:0 10px 0 0}}:host.lightbox-shown{opacity:1}:host.lightbox-shown .lightbox-close,:host.lightbox-shown .lightbox-next,:host.lightbox-shown .lightbox-prev{opacity:.5;transition-delay:.1s}:host.lightbox-shown .lightbox-close:hover,:host.lightbox-shown .lightbox-next:hover,:host.lightbox-shown .lightbox-prev:hover{opacity:1;transition-delay:0}:host.lightbox-shown .lightbox-counter{opacity:1}:host.lightbox-hide-controls .lightbox-close,:host.lightbox-hide-controls .lightbox-next,:host.lightbox-hide-controls .lightbox-prev{opacity:0}:host.lightbox-simple-mode .lightbox-container{cursor:zoom-out}:host:not(.lightbox-animation) .lightbox-container{display:flex;align-items:center;justify-content:center;top:0;left:0;height:100%}:host.lightbox-light{color:#000;text-shadow:none}:host{position:fixed;top:0;left:0;width:100%;height:100%;color:#fff;text-shadow:0 0 1px rgba(0,0,0,.65);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10000}:host img{opacity:1;max-width:100%;max-height:100%}:host img.lightbox-curr-image.lightbox-show{opacity:1}:host img.lightbox-curr-image{opacity:0;z-index:10}:host .lightbox-container.lightbox-hide{display:none}:host .lightbox-container{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transform-origin:top left}:host .lightbox-preloader{background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute}:host .lightbox-spinner{position:absolute;top:51%;left:50%;margin-top:-15px;margin-left:-5px}:host .lightbox-preloader .lightbox-spinner{margin-top:-9px;margin-left:-3px}:host .lightbox-preloader .lightbox-spinner,:host .lightbox-preloader .lightbox-spinner:after,:host .lightbox-preloader .lightbox-spinner:before{width:6px;height:6px}:host .lightbox-preloader .lightbox-spinner:before{left:-21px}:host .lightbox-preloader .lightbox-spinner:after{left:21px}:host .lightbox-counter{text-align:left;position:absolute;left:22px;top:13px;font-size:14px;z-index:30}:host .lightbox-description{text-align:center;max-width:calc(100% - 200px);margin:0 auto;font-size:14px;line-height:43px;position:relative;z-index:50}:host .lightbox-error{color:rgba(255,255,255,.75);font-size:19px}:host .lightbox-close{position:absolute;top:0;right:0;padding:13px 22px;font-size:13px;text-transform:uppercase;cursor:pointer;opacity:.5;z-index:30;transition:opacity .1s ease-in-out}:host .lightbox-next,:host .lightbox-prev{width:100px;height:100%;position:absolute;top:0;cursor:pointer;opacity:.5;z-index:20;transition:opacity .1s ease-in-out;-webkit-tap-highlight-color:rgba(255,255,255,0)}:host .lightbox-prev{left:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjMzMTZCQzFERDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjMzMTZCQzFFRDgzMTExRTc5QUYxQTUxRDI5MkM5ODZCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzMxNkJDMUJEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzMxNkJDMUNEODMxMTFFNzlBRjFBNTFEMjkyQzk4NkIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VrwZKAAAClElEQVR42qzWSY8SQRgGYLoVHPeTXlwCiIwMArJGtiABNep4IGZi4oEfMJooLjePrnFGf5yJS0hYmq2b/aBxiQ6+lRRJdaUZq5vp5E2TLnioVFd9VZLN+iUxIdeMiW2fRVCmvz2DpJBVCk6X6SVBHQRLpVKb7Xb782g0Usrl8jM8W0P20+9YQn3JZPIhwN6MXoPBoI3nG8iKGZhF14A+AqrOmKtWq31F213kkOgQ69B0Ol0BqrFot9vV/H7/c7RfEoVZ1G+EdjqdvtfrfYn2K8gJkaHQodlstjIej/ssihdH0Ddov4acQo7QlycJo5PJhEc1j8fzmqJk2h1D7Lv1lkUv5nK5xzzaarWMUIcwms/nCTrgUbfbTdCrVtAAQafTqQ5VFEVdCi0UCk/Q0yGLNptN1el0vqLoaRHUxqPoKY/2KFo0g0r0ba4Wi8WnQEcs2mg0VAPULrJsZTqpNzDZ6yxar9dVl8tFVtR10SnFohJdgnZYuh9IkjSTZfknPn5DviO/kL/IjkgtIOhhJJ7JZF5gdU24hdDG6qqg/QJywEzlmg/FSTLhE4nE9nA4nHJFRvH5fJto94gOBfvyjtJxXI/H4x+A63re6/UUVDCCnzeDz6fbceQscjsWi703wFsM7hDBJQN8PRqNbmNn0OGapu0JfoviYx4PBAL30e5dCg+Hw0Z4e8/wfr/P451QKPRgaRzIFjDdksefsbjdKn5zER6JRMiwuP+3Ne2KB4PBLVVVR1xd+YK2O2bOFYvwd8CHbK/x/J6Zc8Ui/AZmxdtqtdrAwlFLpRLZrS/PYcnkEUuiY7hCS+g5sovT55+Qj7QS/jYD8zjp/UF6t9GS+oPed8zCLC5zJ0tSo//Q+8wKLHTw/ifAAMQVS4vHZR2VAAAAAElFTkSuQmCC) center left 22px no-repeat}:host .lightbox-next{right:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAiCAYAAABbXymAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyNDE3MDE1RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEyNDE3MDE2RDgzMTExRTc5NjM4QTIzQzI2Rjc2Qjg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTI0MTcwMTNEODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTI0MTcwMTREODMxMTFFNzk2MzhBMjNDMjZGNzZCODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7zv5BKAAACl0lEQVR42rTW224SQRwGcHZb8FT1Sm88BJCiFAE5JpyCBNRE8coYEy94AGqi9XDXS0+JVh/CB/EhiFET5LjAclgWjaa1aazfJDM6u6LuLjrJl2124cd0duY/I9h+NoELabtcTLcFCon0bw+SRE4h28hn2xyNoIvISrlcfqAoSluSpLepVKqCe6cRB/2MYAXei1wfjUbSLm34gX4ymbyN+z6rOBmC/ciNer3+fpdrwGXgd8h/YwVn8Dm/37/e6/UGOnyQTqfXrOBsKI4g571e76Nutzv8De43gwv05S0hx5CLwJ/iBWrwyWQyzGazpnHyITtyCDlBcI/H8wS4ZlhUVbWMO/R4p9P5Bc/lcnfx/Ow8+AW32z0LH+Xz+X+Dt9ttmcen0ynDA1bx4wR3Op2PW62WrOv5uFAo3JsXL1K8r+v5LNxmZrb8wJvNpn5YlGKxeJ/WFruZBcRPxUsul2u90WhocCyqBqk3dLGJiwbgb/T6FflCSqkoiluCIGjqNGzWgQUz9YR8aQ9yBqtyDQtH0q1KNZPJPMTzOHKA4oaHwuPz+SooUm0eHY/H00QisUEWFHKUDYVRdBmVr9Lv9/WoGo/HX+J5iY7/QSMvj003hnb0aCwWe4HnV5GTyGEj002DDgYDDYqdRo1Goxu0p3pU+BvqDQQCqzPQCUWvzINKejQcDltHQ6HQLaBdHh0Oh5ZRO0OBaFD8iIL7z82ibGtyRyKR1T+gl82g/GZ6Dev/HY/KsqwEg0FLKL/93+R7C3QM9Nk8KDtiOWq12jb2s2XS01Kp9Kparb7G/TfIR2QT2TF6UBS42bBEi/UK/SIBPyCfkC0zKA+z6rWPXm30tLlJr6ZQ/ZmYDYnI1eEdejV9Thb+18H7uwADAOG/Wcm4x+knAAAAAElFTkSuQmCC) center right 22px no-repeat}:host .lightbox-close,:host .lightbox-counter,:host .lightbox-next,:host .lightbox-prev{opacity:0;transition:opacity 150ms cubic-bezier(.475,.105,.445,.945)}\"] }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }, { type: ɵngcc0.ChangeDetectorRef }, { type: EventService }]; }, { hostShown: [{\n            type: HostBinding,\n            args: ['class.lightbox-shown']\n        }], hideControls: [{\n            type: HostBinding,\n            args: ['class.lightbox-hide-controls']\n        }], simpleMode: [{\n            type: HostBinding,\n            args: ['class.lightbox-simple-mode']\n        }], hostLightTheme: [{\n            type: HostBinding,\n            args: ['class.lightbox-light']\n        }], scrolling: [{\n            type: HostListener,\n            args: ['window:scroll']\n        }], onKeyDown: [{\n            type: HostListener,\n            args: ['window:keydown', ['$event']]\n        }], onMouseEnter: [{\n            type: HostListener,\n            args: [\"mouseenter\", ['$event']]\n        }], transitionEnd: [{\n            type: HostListener,\n            args: ['transitionend', ['$event']]\n        }], hostAnimation: [{\n            type: HostBinding,\n            args: ['class.lightbox-animation']\n        }], hostStyleBackgroundColor: [{\n            type: HostBinding,\n            args: ['style.backgroundColor']\n        }], prevImageElem: [{\n            type: ViewChild,\n            args: ['prevImageElem', { static: true }]\n        }], lightboxContainerElem: [{\n            type: ViewChild,\n            args: ['lightboxContainer', { static: true }]\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CrystalLightbox, [{\n        type: Injectable\n    }], function () { return [{ type: ɵngcc0.ComponentFactoryResolver }, { type: ɵngcc0.ApplicationRef }, { type: ɵngcc0.Injector }]; }, null); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[lightbox]'\n            }]\n    }], function () { return [{ type: CrystalLightbox }, { type: EventService }, { type: ɵngcc0.ElementRef }]; }, { properties: [{\n            type: Input\n        }], events: [{\n            type: Output\n        }], hostLightboxGroup: [{\n            type: HostBinding,\n            args: ['class.lightbox-single']\n        }], hostSimpleMode: [{\n            type: HostBinding,\n            args: ['class.lightbox-simple-mode']\n        }], onClick: [{\n            type: HostListener,\n            args: ['click', ['$event']]\n        }], fullImage: [{\n            type: Input\n        }], loop: [{\n            type: Input\n        }], backgroundOpacity: [{\n            type: Input\n        }], counter: [{\n            type: Input\n        }], imageMaxHeight: [{\n            type: Input\n        }], imageMaxWidth: [{\n            type: Input\n        }], animationDuration: [{\n            type: Input\n        }], animationMode: [{\n            type: Input\n        }], animationTimingFunction: [{\n            type: Input\n        }], closeButtonText: [{\n            type: Input\n        }], counterSeparator: [{\n            type: Input\n        }], disable: [{\n            type: Input\n        }], simpleMode: [{\n            type: Input\n        }], backgroundColor: [{\n            type: Input\n        }], hideThumbnail: [{\n            type: Input\n        }], gestureEnable: [{\n            type: Input\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(LightboxGroupDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[lightbox-group]'\n            }]\n    }], function () { return [{ type: EventService }, { type: CrystalLightbox }]; }, { hostLightboxGroup: [{\n            type: HostBinding,\n            args: ['class.lightbox-group']\n        }], _lightboxDirectiveList: [{\n            type: ContentChildren,\n            args: [LightboxDirective, { descendants: true }]\n        }] }); })();\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(CrystalLightboxModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [\n                    LightboxCommonComponent,\n                    LightboxComponent,\n                    LightboxDirective,\n                    LightboxGroupDirective\n                ],\n                imports: [\n                    CommonModule\n                ],\n                exports: [\n                    LightboxDirective,\n                    LightboxGroupDirective\n                ],\n                providers: [\n                    CrystalLightbox,\n                    EventService\n                ],\n                bootstrap: [],\n                entryComponents: [\n                    LightboxComponent\n                ]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(CrystalLightboxModule, { declarations: function () { return [LightboxCommonComponent, LightboxComponent, LightboxDirective, LightboxGroupDirective]; }, imports: function () { return [CommonModule]; }, exports: function () { return [LightboxDirective, LightboxGroupDirective]; } }); })();\n\n/*\r\n * Public API Surface of angular-lightbox\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { CrystalLightboxModule, EventService, LightboxDirective, LightboxGroupDirective, LightboxCommonComponent as ɵa, LightboxComponent as ɵb, CrystalLightbox as ɵc };\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}